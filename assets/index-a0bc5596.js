(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}})();const A=e=>{try{return JSON.parse(localStorage.getItem(e))}catch{return null}},zt=e=>localStorage.removeItem(e),T=(e,d)=>{localStorage.setItem(e,JSON.stringify(d))},G={base:"https://api.noroff.dev/api/v1/auction/",register:"auth/register",login:"auth/login",account:"profiles/"+A("name")+"?_listings=true",listings:"listings",profiles:"profiles",editAvatar:"profiles/"+A("name")+"/media"},{base:Re}=G,U={"Content-Type":"application/json",Authorization:`Bearer ${A("auctionToken")}`},E={registerLogin:{method:"POST",headers:{"Content-Type":"application/json"},body:{}},getWithJwt:{method:"GET",headers:U},entry:{method:"POST",headers:U,body:{}},update:{method:"PUT",headers:U,body:{}},deleteOpt:{method:"DELETE",headers:U},react:{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("socialToken")}`}}},g=async(e,d)=>{try{return await(await fetch(Re+e,d)).json()}catch(s){console.error(s)}},be=()=>{document.querySelectorAll(".fa-expand").forEach(d=>{d.addEventListener("click",s=>{const n=document.createElement("div");n.setAttribute("class","modal"),document.querySelector("main").append(n);const o=s.currentTarget.nextElementSibling.nextElementSibling.cloneNode(!0);n.append(o),n.addEventListener("click",()=>{document.querySelector(".modal").remove()})})})},t=(e,d)=>{const s=document.createElement(e);for(const n in d)s.setAttribute(n,d[n]);return s},Pe=1e3,V=Pe*60,O=V*60,Ue=O*24,L=e=>{const d=new Date(e),s=new Date;return d-s},Kt=(e,d)=>{const s=Math.floor(L(e)%Ue/O);let n;return d.length>0?n=d[d.length-1].amount:n="0",s<0?'<span class="bg-auctionRed text-auctionGrey">SOLD</span>':"<span>"+s+" hours left</span><span>Bid:"+n+"$</span>"},Qt=(e,d)=>{const s=Math.floor(L(e)%O/V);let n;return d.length>0?n=d[d.length-1].amount:n="0",s<0?'<span class="bg-auctionRed text-auctionGrey">SOLD</span>':"<span>"+s+" min left</span><span>Bid:"+n+"$</span>"},Xt=e=>{let d=[...e];for(let s=0;s<d.length;s++){let n=!1;for(let i=0;i<d.length;i++)if(d[i]>d[i+1]){let o=d[i];d[i]=d[i+1],d[i+1]=o,n=!0}if(!n)return d}return d},de=e=>`
  <div
    class="relative aspect-square lg:aspect-square flex flex-col items-center mb-2 shrink justify-between bg-almostWhite overflow-auto hover:overflow-scrollborder-5">
    <i class="absolute fa-sharp fa-solid fa-expand top-5 right-5 text-black fa-lg" id="${e.id}"></i>
    <p class="absolute text-almostWhite p-1 bg-auctionBrown  left-0 bottom-20">${e.title}</p>
    <img
      src="${e.media[0]}"
      alt="" class="itemImage object-top  object-cover h-2/3 shrink min-w-full img${e.id}">
     <div class="flex text-auctionBlue min-w-full justify-around">
         <div class="flex flex-col m-0 p-0">
         ${Kt(e.endsAt,e.bids)}
         </div>
       <button id=${e.id}" class="bg-auctionGrey p-1 mb-5 rounded-sm text-almostWhite font-bold item${e.id}">view item</button>
    </div>
  </div>
    `,Zt=document.querySelector("#home-link"),en=document.querySelector("#filters"),B=document.querySelector("#searchFilters"),Je=document.querySelector("#searchForm"),m=document.querySelector("#searchResults"),y=document.querySelector("#itemContainer"),tn=document.querySelector("#itemContainer1");document.querySelector("#itemContainer2");const nn=document.querySelector("#itemContainer3"),H=document.querySelector("#userContainer");let b=document.querySelector("#listingsFeed");const M=document.querySelector("#listingHeader");document.querySelector("#filter-link-1");const _=document.querySelector("#nav-link-1"),ie=document.querySelector("#nav-link-2");document.querySelector("main");const f=document.querySelector("#profileContainer"),sn=document.querySelector("#navWithBar"),oe=document.querySelector("#ghostButton"),x=document.querySelector("#expireSoonFeed"),v=document.querySelector("#newListingsFeed"),_e=(e,d)=>{const s=document.querySelector(".counterBox"+e),n=t("div",{class:"time flex flex-col"}),i=t("div",{class:"time flex flex-col"}),o=t("div",{class:"time flex flex-col"}),a=t("h2",{class:"mx-auto text-auctionRed"}),c=t("h2",{class:"mx-auto text-auctionRed"}),r=t("h2",{class:"mx-auto text-auctionRed"}),u=t("small",{class:"mx-auto text-auctionRed"}),l=t("small",{class:"mx-auto text-auctionRed"}),w=t("small",{class:"mx-auto text-auctionRed"});return u.innerHTML="hours",l.innerHTML="minutes",w.innerHTML="seconds",n.append(a,u),i.append(c,l),o.append(r,w),s.append(n,i,o),setInterval(()=>{r.innerHTML=Math.floor(L(d)%V/Pe),c.innerHTML=Math.floor(L(d)%O/V),a.innerHTML=Math.floor(L(d)%Ue/O)},1e3),s},dn=(e,d,s)=>{e.forEach((n,i)=>{const o=t("button",{class:"border bg-auctionBlue aspect-square flex h-7 mx-3 place-content-center items-center border-2 border-almostWhite drop-shadow-md font-bold"});o.innerHTML=i+1,s.append(o),o.addEventListener("click",c=>{document.querySelector(".bg-auctionBlue").classList.add("bg-slate-400"),document.querySelector(".bg-auctionBlue").classList.remove("bg-auctionBlue"),c.currentTarget.classList.remove("bg-slate-400"),c.currentTarget.classList.add("bg-auctionBlue"),document.querySelector(".currentImg").classList.add("hidden"),document.querySelector(".currentImg").classList.remove("currentImg"),document.getElementById(c.currentTarget.innerHTML).classList.remove("hidden"),document.getElementById(c.currentTarget.innerHTML).classList.add("currentImg")});const a=t("img",{class:" object-top  object-cover h-2/3 shrink w-4/5 mx-auto currentImg aspect-square drop-shadow-md hidden",id:i+1});i===0&&a.classList.remove("hidden"),a.src=n,d.append(a),i!==0&&o.classList.add("bg-slate-400")})},{entry:Ge}=E,on=(e,d)=>{const s=new FormData(e.currentTarget),n=Object.fromEntries(s.entries()),{amount:i}=n;Ge.body=JSON.stringify({amount:Number(i)}),console.log(n),console.log(d),g(`listings/${d}/bids`,Ge).then(c=>{console.log(c)});const a=A("credits")-Number(i);T("credits",a)},an=(e,d,s,n,i,o,a)=>{e.addEventListener("click",c=>{const r=document.createElement("div");r.setAttribute("class","modal"),r.classList.add("bg-auctionGrey"),document.querySelector("main").append(r);const u=I;r.append(u),Ye.innerHTML=d,Qe.innerHTML="Your bid: "+s+"$",Ve.src=o,ze.innerHTML="<span class='underline underline-offset-2 '>current status</span>"+Qt(n,i),Ke.innerHTML="Your credits "+A("credits")+"$",Xe.value=s,fe.addEventListener("click",()=>{document.querySelector(".modal").remove(),window.location.reload()}),document.getElementById("modalSubmit").addEventListener("submit",l=>{l.preventDefault(),l.stopImmediatePropagation(),on(l,a),ae.classList.remove("bg-orange-300"),ae.classList.add("bg-green-200"),setTimeout(()=>{window.location.reload()},1500)})})},I=t("form",{class:"bg-almostWhite w-4/5 md:w-1/2 h-2/3 mx-auto justify-around flex flex-col my-2 p-5 relative bg-auctionWhite",id:"modalSubmit"}),fe=t("i",{class:" text-auctionRed absolute p-4 aspect-square right-0 top-0 h-7"});fe.innerHTML="<i class='fa-solid fa-xmark fa-xl'></i>";const Ye=t("h2",{class:"text-logoBg font-bold w-full text-xl mx-auto my-2 p-1 flex place-content-center "}),Ve=t("img",{class:"object-top  object-cover h-2/3 shrink w-4/5 mx-auto currentImg aspect-square drop-shadow-md"}),ze=t("h4",{class:" py-3 mx-auto text-lg flex place-content-center flex-col text-logoBg font-bold"}),Ke=t("h4",{class:"py-3 absolute left-0 top-1  text-logoBg font-bold"}),Qe=t("h3",{class:"w-full py-3 mx-auto text-lg flex place-content-center text-logoBg font-bold"}),Xe=t("input",{id:"bidInput",name:"amount",type:"number",class:"bg-almostWhite border border-2 w-10 bg-white text-auctionGrey hidden",placeholder:"$"}),ae=t("input",{type:"submit",value:"Confirm",class:"border text-lg font-bold border-radius-sm bg-orange-300 text-auctionBrown py-2 px-4"});I.append(Ye);I.append(fe);I.append(Ve);I.append(ze);I.append(Ke);I.append(Qe);I.append(Xe);I.append(ae);t("input",{type:"submit",value:"Confirm",class:"border border-radius-sm bg-white text-auctionBlue px-2"});t("div",{class:"w-1/2 shrink flex justify-end p-2 gap-1"});const rn=t("label",{for:"bidInput",class:" text-auctionBrown text-base w-1/2 flex place-content-center items-center"});rn.textContent="Place a bid";const cn=(e,d,s,n,i,o,a,c)=>{e.addEventListener("keyup",r=>{r.stopImmediatePropagation();const u=r.currentTarget.value;u-1<d?(s.classList.remove("bg-white"),s.classList.add("bg-red-200"),s.setAttribute("disabled","disabled"),e.setAttribute("title","amount to low")):(s.classList.add("bg-white"),s.classList.remove("bg-red-200"),s.removeAttribute("disabled"),e.removeAttribute("title"),an(s,n,u,i,o,a,c))})},Ze=e=>{e.addEventListener("click",()=>{window.location.reload()}),e.innerHTML="&#x2190; back"},z=()=>!(localStorage.getItem("auctionToken")===null||localStorage.getItem("auctionToken")==="undefined"),ln=(e,d,s)=>{s.length===0&&(d.remove(),e.remove()),s.forEach(n=>{d.insertAdjacentHTML("beforeend",`
        <div class="w-full text-auctionGrey flex">
        <p class="w-full text-auctionGrey text-center">${n.bidderName}</p>
        <p class="w-full text-auctionGrey text-center">${n.amount} $</p>
        </div>
        `)}),e.addEventListener("click",n=>{d.classList.toggle("hidden")})},un=t("div",{class:"counterBox w-full grid grid-cols-3  my-5 p-0"}),et=t("p",{class:"text-auctionGrey"}),re=t("p",{class:"text-auctionGrey"}),tt=t("div",{class:"w-full bg-green-200 flex justify-around md:w-3/4 mx-auto my-2  flex-wrap "});tt.append(et,re);const Le=t("button",{class:"px-1 mx-auto text-auctionGrey rounded-sm text-sm bg-auctionYellow mx-auto"});Le.innerHTML="View all bids &darr;";const nt=t("div",{class:"text-auctionGrey w-full hidden bg-auctionYellow w-1/2 mx-auto",id:"bid-section"}),st=t("input",{id:"bidInput",name:"amount",type:"number",class:"bg-almostWhite border border-2 w-10 bg-white text-auctionGrey",placeholder:"$"}),dt=t("input",{type:"button",value:"SUBMIT",class:"border border-radius-sm bg-white text-auctionBlue px-2"}),xe=t("div",{class:"w-1/2 shrink flex justify-end p-2 gap-1"}),ve=t("label",{for:"bidInput",class:" text-auctionBrown text-base w-1/2 flex place-content-center items-center"});ve.textContent="Place a bid";const it=t("div",{class:"bg-auctionBlue w-full bg-opacity-50 md:w-3/4 mx-auto flex my-2 p-1"}),ot=t("div",{class:"relative flex flex-col justify-between bg-almostWhite p-3"}),Y=t("div",{class:""}),at=t("h1",{class:"text-auctionBlue block text-xl mx-auto flex place-content-center"}),ce=t("p",{class:"text-auctionBrown mx-auto"}),ye=t("div",{class:"flex place-content-center align-center my-5 flex-wrap"}),rt=t("small",{class:"text-auctionGrey w-full flex place-content-center"});rt.innerHTML="images";ye.append(rt);const ct=t("div",{class:"bg-white p-5 mx-auto flex flex-col   md:w-4/5 border border-auctionBrown rounded-lg drop-shadow-sm my-10"});ot.append(ce,ct);const we=t("div",{class:"mx-auto my-5 md:w-4/5 flex flex-wrap divide-x divide-slate-200"}),lt=t("h3",{class:"text-md text-auctionBlue w-full"});lt.innerHTML="Description";const ut=t("p",{class:"text-auctionGrey w-1/2 p-1"});we.append(lt);const mt=t("p",{class:"text-auctionGrey w-1/2 p-1"});we.append(ut,mt);xe.append(st,dt);it.append(ve,xe);ct.append(at,ye,Y,un,tt,Le,nt,it,we);const Te=t("div",{class:"w-full flex lg:w-2/4 md:w-3/4 self-center"}),ht=t("img",{class:"w-1/2 apect-square mx-auto border rounded-lg max-w-lg"}),pt=t("h2",{class:"w-1/2 mx-auto text-auctionGrey text-xl flex items-center place-content-center"});Te.append(ht);Te.append(pt);const le=t("div",{class:"py-20"}),gt=t("h2",{class:"text-lg text-auctionGrey"});le.append(gt);const mn=(e,d,s,n)=>{const i=t("button",{class:`w-full grid grid-cols-3 relative h-24 items-center border rounded border-auctionBrown my-2 place-content-center itemm${e}`}),o=t("img",{class:"h-12 w-12 aspect-square object-cover mx-auto"});o.src=d;const a=t("p",{class:"text-auctionGrey"});a.innerHTML=s;const c=t("p",{class:"text-auctionGrey"});return c.innerHTML=n,i.append(o,a,c),i},$e=e=>L(e)<0?"<span class='bg-red-300 bg-opacity-30 p-2 text-auctionGrey'>FINISED</span>":"<span class='bg-auctionGreen bg-opacity-30 p-2 text-auctionGrey'>ACTIVE</span>",ue=t("div",{class:"py-10"}),bt=t("h2",{class:"text-lg text-auctionGrey "});ue.append(bt);const hn=(e,d,s)=>{const n=t("a",{class:"w-full grid grid-cols-3 relative h-20 items-center border rounded border-auctionBrown my-2 place-content-center"});n.href=e;const i=t("p",{class:"text-auctionGrey"});i.innerHTML=d;const o=t("p",{class:"text-auctionGrey"});return o.innerHTML=s,n.append(i,"-",o),n},pn=(e,d)=>{document.querySelector(".itemm"+e).addEventListener("click",()=>{ft(e,d),y.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),tn.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),H.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),f.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),m.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),b.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),x.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),v.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),B.classList.add("hidden","sm:hidden","md:hidden","lg:hidden")})},{getWithJwt:je}=E,gn=e=>{Ze(M);const d=`profiles/${e}?_listings=true `,s=`profiles/${e}/bids?_listings=true`;H.append(Te,le,ue),g(d,je).then(n=>{ht.src=n.avatar,pt.innerHTML=n.name,gt.innerHTML=n.name+"'s listings",n.listings.forEach(i=>{le.insertAdjacentElement("beforeend",mn(i.id,i.media[0],i.title,$e(i.endsAt))),pn(i.id,nn)})}),g(s,je).then(n=>{bt.innerHTML=n[0].bidderName+" made bid's on these listings",n.forEach(i=>{ue.insertAdjacentElement("beforeend",hn(`../item?id=${i.listing.id}`,i.listing.title,$e(i.listing.endsAt)))})})},bn=(e,d)=>{document.querySelector(".user"+e).addEventListener("click",()=>{gn(d),y.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),H.classList.remove("hidden","sm:hidden","md:hidden","lg:hidden"),f.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),m.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),b.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),x.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),v.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),B.classList.add("hidden","sm:hidden","md:hidden","lg:hidden")})},ft=(e,d=y)=>{M.innerHTML="",document.title="Item | AuctionHouse";const s=`listings/${e}?_seller=true&_bids=true`;Ze(M),d.append(ot),g(s).then(n=>{var c;n.media.length>0?dn(n.media,Y,ye):(Y.innerHTML="No images added to this listing",Y.classList.add("text-auctionGrey"));const i=n.endsAt;at.innerHTML=n.title,z()?ce.innerHTML=`<button class="border border-black px-2 rounded-none user${n.seller.name}" id"../user/${n.seller.name}"><span class="text-auctionGrey">seller: </span class="font-bold text-lg">${n.seller.name}</button>`:ce.innerHTML=`<button disabled="disabled">${n.seller.name} <span class="text-auctionGrey">(log in to visit ) </span></button>`,L(n.endsAt)>0&&_e("",i),et.innerHTML="Highest bid",n.bids.length>0?re.innerHTML=n.bids[n.bids.length-1].bidderName+": "+n.bids[n.bids.length-1].amount+"$":re.innerHTML=0+"$",ut.innerHTML=n.description,mt.innerHTML="tags: "+n.tags.toString(""),L(n.endsAt)<0&&(xe.innerHTML="Not possible to bid on this item");const a=((c=n.bids[n.bids.length-1])==null?void 0:c.amount)??0;z()?cn(st,a,dt,n.title,n.endsAt,n.bids,n.media[0],n.id):ve.innerHTML="log in to bid",console.log(n),ln(Le,nt,n.bids),bn(n.seller.name,n.seller.name)})},Be=e=>{document.querySelector(".item"+e).addEventListener("click",()=>{ft(e),y.classList.remove("hidden","sm:hidden","md:hidden","lg:hidden"),H.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),f.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),m.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),b.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),x.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),v.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),B.classList.add("hidden","sm:hidden","md:hidden","lg:hidden")})},We=async e=>{await g("listings?_bids=true&sort=created&sortOrder=desc").then(d=>{const s=d.filter(n=>n.bids.length>0);for(let n=0;n<s.length;n++){const i=s[n];if(n===10)break;b.insertAdjacentHTML("beforeend",de(i)),Be(i.id)}}),be()},fn=()=>{_.textContent="Profile",ie.addEventListener("click",()=>{localStorage.clear(),document.location.reload()}),ie.textContent="Logout",document.title="Feed | AuctionHouse"},Ln=()=>{A("authed")===null?We():z()&&(We(),fn())},W=t("button",{class:"text-almostWhite bg-logoBg w-1/4  rounded-none px-1 border-none mx-auto w-30 enabled:hover:outline-none",id:"filter-link-1"});W.innerHTML="Newest";const N=t("button",{class:"text-almostWhite bg-logoBg w-1/4  rounded-none px-1 border-none mx-auto w-30 enabled:hover:outline-none",id:"filter-link-2"});N.innerHTML="Expiring today";const He=t("nav",{class:""}),Lt=t("div",{class:"flex self-center"}),xt=t("p",{class:"text-logoBg m-auto"});xt.innerHTML="sort by";const R=t("div",{class:"flex flex-col md:flex-row md:pb-0 pb-0 gap-2"});Lt.append(xt);R.append(N);R.append(W);He.append(Lt);He.append(R);const me=t("button",{class:"px-5 border border-1 text-logoBg py-2 mx-auto block"});me.innerHTML="Next";const C=t("button",{class:"border border-logoBg py-1 mx-2 w-20 enabled:hover:outline-none text-black"});C.innerHTML="titles";const D=t("button",{class:"border border-logoBg py-1 mx-2 w-20 enabled:hover:outline-none text-black"});D.innerHTML="users";const P=t("button",{class:"border border-logoBg py-1 mx-2 w-20 enabled:hover:outline-none text-black"});P.innerHTML="tags";const vt=(e,d,s,n)=>{const i=t("a",{class:"w-full grid grid-cols-3 relative h-24 items-center border rounded border-auctionBrown my-2 place-content-center"});i.href=e;const o=t("img",{class:"h-12 w-12 aspect-square object-cover mx-auto"});o.src=d;const a=t("p",{class:"text-auctionGrey"});a.innerHTML=s;const c=t("p",{class:"text-auctionGrey"});return c.innerHTML=n,i.append(o,a,c),i},yt=e=>L(e)<0?"<span class='bg-red-300 bg-opacity-30 p-2 text-auctionGrey'>FINISED</span>":"<span class='bg-auctionGreen bg-opacity-30 p-2 text-auctionGrey'>ACTIVE</span>",xn=(e,d,s)=>{const n=t("a",{class:"w-full grid grid-cols-2 relative h-24 items-center border rounded border-auctionBrown my-2 place-content-center"});n.href="../user/"+e;const i=t("img",{class:"h-12 w-12 aspect-square object-cover mx-auto"});i.src=d;const o=t("p",{class:"text-auctionGrey"});return o.innerHTML=s,n.append(i,o),n},vn=()=>{Je.addEventListener("input",()=>{b.innerHTML="",m.innerHTML=`<div class="h-screen flex items-start place-content-center">
            <div class="relative w-24 h-24 animate-spin rounded-full bg-gradient-to-r from-auctionGreen via-logoBg to-auctionBlue ">
            <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-20 h-20 bg-gray-200 rounded-full border-2"></div>
            </div>
            </div>`,B.append(C,P,D),B.classList.remove("hidden","sm:hidden","md:hidden","lg:hidden"),S.classList.remove("bg-auctionBlue"),k.classList.remove("bg-auctionBlue"),f.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),x.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),v.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),b.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),y.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),H.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),m.classList.remove("hidden","sm:hidden","md:hidden","lg:hidden")})},wt=async(e,d)=>{let s=e;v.innerHTML="",M.innerHTML="Recently added items",await g("listings?_bids=true&sort=created&sortOrder=desc").then(i=>{const o=i.filter(a=>a.media[0]!==void 0);for(s;s<d;s++){const a=o[s];de(a),v.insertAdjacentHTML("beforeend",de(a)),Be(a.id)}}),be(),v.insertAdjacentElement("afterend",me);let n=0;me.addEventListener("click",i=>{i.stopImmediatePropagation(),n++,wt(14*n,28*n)})},yn=e=>`
    <div
    class="relative aspect-square lg:aspect-square flex flex-col items-center mb-2 shrink justify-between bg-almostWhite overflow-auto hover:overflow-scrollborder-5">
    <i class="absolute fa-sharp fa-solid fa-expand top-5 right-5 text-black fa-lg" id="${e.id}"></i>
    <p class="absolute text-almostWhite p-1 bg-auctionBrown  left-0 bottom-20">${e.title}</p>
    <img 
      src="${e.media[0]}"
      alt="" class="itemImage object-top  object-cover h-2/3 shrink min-w-full img${e.id}">
    <div class="flex text-auctionBlue min-w-full justify-around counterB">
    <div class="grid grid-cols-3  m-0 p-0 w-1/2 counterBox${e.id}">
    </div>
    <button id="${e.id}" class="bg-auctionGrey p-1 mb-5 rounded-sm text-almostWhite item${e.id}">view item</button>
    </div>
  </div>
    `,wn=async(e,d)=>{let s=[],n=e;x.innerHTML="",M.innerHTML="Expires today",await g("listings?_bids=true&sort=created&sortOrder=desc").then(i=>{const o=i.filter(r=>L(r.endsAt)<864e5&&L(r.endsAt)>0),a=[];o.forEach(r=>{a.push(r.endsAt)});const c=Xt(a);for(let r=0;r<c.length;r++){const u=c[r];for(let l=0;l<o.length;l++){let w=o[l];o[l].endsAt===u&&!s.includes(o[l])&&s.push(w)}}for(n=0;n<d;n++){const r=s[n];if(r===void 0)break;const u=r.endsAt,l=r.id;x.insertAdjacentHTML("beforeend",yn(r)),_e(l,u),Be(l)}}),be()},Tt=(e,d=0)=>{let s;return function(...n){clearTimeout(s),s=setTimeout(()=>e.apply(this,n),d)}},Tn=e=>{C.addEventListener("click",d=>{d.currentTarget.classList.add("bg-auctionBlue"),P.classList.remove("bg-auctionBlue"),D.classList.remove("bg-auctionBlue"),m.innerHTML="",setTimeout(()=>{(m.innerHTML.includes("-translate-x-1/2")||m.innerHTML==="")&&(m.innerHTML="<p class='font-bold text-black mx-auto'>No results. <a href='/'>Go back</a></p>")},1500),e.forEach(s=>{m.insertAdjacentElement("beforeend",vt(`../item?id=${s.id}`,s.media[0],s.title,yt(s.endsAt)))})}),C.click(),M.innerHTML="Search by title"},Bn=e=>{P.addEventListener("click",d=>{M.innerHTML="Search by tags",d.currentTarget.classList.add("bg-auctionBlue"),C.classList.remove("bg-auctionBlue"),D.classList.remove("bg-auctionBlue"),m.innerHTML="",e.forEach(s=>{m.insertAdjacentElement("beforeend",vt(`../item?id=${s.id}`,s.media[0],s.title,yt(s.endsAt)))})})},Hn=e=>{D.addEventListener("click",d=>{M.innerHTML="Search by user",d.currentTarget.classList.add("bg-auctionBlue"),C.classList.remove("bg-auctionBlue"),P.classList.remove("bg-auctionBlue"),m.innerHTML="",e.forEach(s=>{m.insertAdjacentElement("beforeend",xn(s.name,s.avatar,s.name))})})},{getWithJwt:Mn}=E,En=()=>{Je.addEventListener("input",Tt(e=>{kn(e)},1e3))},kn=e=>{g("listings").then(d=>{const s=d.filter(i=>Boolean(i.tags.map(a=>a.toLowerCase()).filter(a=>a.includes(e.target.value)).length)),n=d.filter(i=>i.title.includes(e.target.value));Tn(n),Bn(s)}),z()?g("profiles",Mn).then(d=>{const s=d.filter(n=>n.name.includes(e.target.value));Hn(s),console.log(d)}):D.remove()},k=N.cloneNode(!0);k.innerHTML="Expiring today";k.id="newExB";const S=W.cloneNode(!0);S.innerHTML="Newest";S.id="newNewBtn";const Sn=()=>{en.insertAdjacentElement("beforeend",He),W.addEventListener("click",e=>{e.currentTarget.classList.add("bg-auctionBlue"),b.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),wt(0,14),N.classList.remove("bg-auctionBlue"),k.classList.remove("bg-auctionBlue"),W.remove(),R.insertAdjacentElement("beforeend",S),S.classList.add("bg-auctionBlue"),f.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),x.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),v.classList.remove("hidden","sm:hidden","md:hidden","lg:hidden"),m.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),B.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),H.classList.add("hidden","sm:hidden","md:hidden","lg:hidden")}),N.addEventListener("click",e=>{b.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),wn(0,14),W.classList.remove("bg-auctionBlue"),S.classList.remove("bg-auctionBlue"),x.classList.remove("hidden","sm:hidden","md:hidden","lg:hidden"),N.remove(),R.insertAdjacentElement("afterbegin",k),k.classList.add("bg-auctionBlue"),v.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),m.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),B.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),H.classList.add("hidden","sm:hidden","md:hidden","lg:hidden")}),vn(),En()},An=()=>{k.addEventListener("click",e=>{S.classList.remove("bg-auctionBlue"),e.currentTarget.classList.add("bg-auctionBlue"),b.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),x.classList.remove("hidden","sm:hidden","md:hidden","lg:hidden"),f.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),v.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),m.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),B.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),H.classList.add("hidden","sm:hidden","md:hidden","lg:hidden")}),S.addEventListener("click",e=>{e.currentTarget.classList.add("bg-auctionBlue"),x.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),e.currentTarget.classList.add("bg-auction"),b.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),k.classList.remove("bg-auctionBlue"),x.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),f.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),v.classList.remove("hidden","sm:hidden","md:hidden","lg:hidden"),m.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),B.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),H.classList.add("hidden","sm:hidden","md:hidden","lg:hidden")})},In=()=>{Zt.addEventListener("click",()=>{document.location.reload()})},Bt=t("div",{class:"mx-auto w-full mt-15  md:mx-auto md:w-1/2"}),Z=t("form",{class:"mt-8 space-y-6 flex flex-col justify-center",method:"POST"}),Ht=Z.cloneNode(!0),ee=t("div",{class:""}),qn=t("input",{class:"bg-logoBg relative block w-full appearance-none border border-auctionBlue px-3 py-2 focus:outline-auctionBrown",type:"email",placeholder:"email",name:"email",pattern:"^[\\w\\-.]+@(stud.)?noroff.no$",title:"use a @stud.noroff.no mail-adress",required:"required"}),Mt=ee.cloneNode(!0);ee.append(qn);const Gn=t("input",{class:"bg-logoBg relative block w-full appearance-none border border-auctionBlue px-3 py-2 focus:outline-auctionBrown",title:"uppercase, lowercase and (_) allowed",placeholder:"name",type:"text",name:"name",pattern:"[\\w]+$"}),$n=ee.cloneNode(!0);Mt.append(Gn);const Me=t("div",{class:""}),jn=t("input",{class:"bg-logoBg relative block w-full appearance-none border border-auctionBlue px-3 py-2 focus:outline-auctionBrown",type:"password",placeholder:"password",name:"password",minlength:"8",required:"required"});Me.append(jn);const Wn=Me.cloneNode(!0),Ee=t("button",{type:"submit",class:"bg-auctionBlue text-almostWhite p-1  rounded-sm  mx-auto"});Ee.innerHTML="Login";const Et=Ee.cloneNode(!0);Et.innerHTML="Register";const te=t("div",{class:"bg-auctionBlue rounded text-center hidden",id:"login-success-alert"}),kt=te.cloneNode(!0);kt.innerHTML="Account successfully created";te.innerHTML="Login successful";const K=t("div",{class:"bg-auctionRed rounded text-center hidden",id:"login-warning-alert"});Z.append(ee,Me,Ee,te,K);const St=t("div",{class:"flex flex-col items-center justify-between mt-3"}),At=t("span",{class:"text-auctionGrey mx-auto"});At.innerHTML="OR";const Nn=t("div",{class:"text-md mt-5 mx-auto"}),ke=t("a",{class:"text-almostWhite bg-auctionGrey opacity-50 p-1 ml-1 rounded-sm hover:text-indigo-500",href:"./register"});ke.innerHTML="Create an accocunt";Nn.append(ke);St.append(At,ke);Bt.append(Z,St);const It=t("div",{class:"mx-auto w-full mt-15  md:mx-auto md:w-1/2"}),Cn=K.cloneNode(!0);Ht.append(Mt,$n,Wn,Et,kt,Cn);It.append(Ht);const Dn=()=>{y.insertAdjacentElement("beforeend",Bt)},{login:Fn}=G,{registerLogin:Ne}=E,On=()=>{Z.addEventListener("submit",e=>{e.preventDefault();const d=new FormData(e.currentTarget),s=Object.fromEntries(d.entries()),{email:n}=s;Ne.body=JSON.stringify(s),g(Fn,Ne).then(i=>{if(i.email===n){const{name:o,email:a,credits:c,avatar:r,accessToken:u}=i;console.log(i),te.classList.remove("hidden"),T("auctionToken",u),T("name",o),T("credits",c),T("email",a),T("avatar",r),setTimeout(()=>{T("authed","true"),T("page","index"),window.location.reload()},2e3)}else i.statusCode===401&&(K.classList.remove("hidden"),K.textContent=i.errors[0].message)})})},{entry:Ce}=E,{listings:Rn}=G,Pn=e=>{const d=new FormData(e.currentTarget),s=Object.fromEntries(d.entries()),{date:n,tags:i,title:o,description:a}=s,r=new Date(n).toJSON();let u=[],l=i.split(",");document.querySelectorAll("[name='media'").forEach(q=>{q.value.length>0&&u.push(q.value)}),Ce.body=JSON.stringify({title:o,description:a,tags:l,media:u,endsAt:r}),g(Rn,Ce).then(q=>{console.log(q)})},h=t("form",{class:" hidden mt-8 bg-logoBg p-3 relative flex flex-col justify-center mx-auto md:w-2/3 w-full",id:"newItem",method:"post",required:"required"}),qt=t("small",{class:"text-almostWhite mx-auto mt-2"});qt.innerHTML="Title";const Un=t("input",{class:"bg-almostWhite mt-2 rounded p-1 text-black py-1",type:"text",name:"title",id:"titleInput",placeholder:"Title",required:"required"}),Gt=t("small",{class:"text-almostWhite mx-auto mt-2"});Gt.innerHTML="tags";const Jn=t("input",{class:"bg-almostWhite mt-2 rounded p-1 text-black py-1",type:"text",name:"tags",id:"tagsInput",placeholder:"tags"}),$t=t("small",{class:"text-almostWhite mx-auto mt-2"});$t.innerHTML="Description";const _n=t("input",{class:"bg-almostWhite mt-2 rounded p-1 text-black py-1",type:"text",name:"description",id:"descriptionInput",placeholder:"description"}),jt=t("small",{class:"text-almostWhite mx-auto mt-2"});jt.innerHTML="Image URL's";const Yn=t("input",{class:"bg-almostWhite mt-2 rounded p-1 text-black py-1",type:"url",name:"media",id:"mediaInput",placeholder:"media URL"}),he=t("input",{class:"hidden bg-almostWhite mt-2 rounded p-1 text-black py-1",type:"url",name:"media",id:"mediaInput1",placeholder:"media URL",disabled:"disabled"}),pe=t("input",{class:"hidden bg-almostWhite mt-2 rounded p-1 text-black py-1",type:"url",name:"media",id:"mediaInput2",placeholder:"media URL",disabled:"disabled"}),ge=t("input",{class:"hidden bg-almostWhite mt-2 rounded p-1 text-black py-1",type:"url",name:"media",id:"mediaInput3",placeholder:"media URL",disabled:"disabled"}),Vn=t("input",{class:"bg-almostWhite mt-2 rounded p-1 text-black py-1",type:"datetime-local",name:"date",id:"dateInput",placeholder:"ends at",required:"required"}),zn=t("input",{class:"mt-2 rounded-none py-3 bg-auctionBlue",type:"submit",placeholder:"submit"}),Se=t("button",{class:"text-sm p-0 m-0 border rounded-none mx-auto px-1 mt-1",type:"button"});Se.innerHTML="Add photos &#8595";Se.addEventListener("click",e=>{he.classList.remove("hidden"),pe.classList.remove("hidden"),ge.classList.remove("hidden"),he.removeAttribute("disabled"),pe.removeAttribute("disabled"),ge.removeAttribute("disabled"),e.currentTarget.classList.add("hidden")});h.append(qt);h.append(Un);h.append(Gt);h.append(Jn);h.append($t);h.append(_n);h.append(jt);h.append(Yn);h.append(he);h.append(pe);h.append(ge);h.append(Se);h.append(Vn);h.append(zn);const{deleteOpt:Kn}=E,{listings:Qn}=G,Xn=e=>{e.addEventListener("click",()=>{fetch(Re+Qn+"/"+e.id,Kn),setTimeout(()=>{window.location.reload()},500)})},{update:De}=E,{listings:Zn}=G,es=(e,d)=>{const s=new FormData(e.currentTarget),n=Object.fromEntries(s.entries()),{tags:i,title:o,description:a}=n;let c=[],r=i.split(",");e.currentTarget.querySelectorAll("[name='media'").forEach(l=>{l.value.length>0&&c.push(l.value)}),De.body=JSON.stringify({title:o,description:a,tags:r,media:c}),g(Zn+"/"+d,De).then(l=>{console.log(l)})},{listings:ts}=G,{getWithJwt:ns}=E,ss=e=>{e.addEventListener("click",d=>{d.stopImmediatePropagation();const s=t("i",{class:"fa-solid fa-xmark fa-xl text-almostWhite absolute p-4 aspect-square right-0 top-0 h-7 hover:bg-auctionGreen"});p.append(s),p.classList.remove("hidden"),j.classList.add("modal"),j.classList.remove("hidden");const n=p.dateInput;n.remove();const i=p.querySelector("button");i.remove();const o=p.tags,a=Array.from(p.media);p.querySelectorAll(".hidden").forEach(r=>{r.classList.remove("hidden")}),g(ts+"/"+d.currentTarget.id,ns).then(r=>{p.title.value=r.title,p.description.value=r.description,r.media.forEach((l,w)=>{a[w].value=l}),o.value=r.tags.join(", ")}),s.addEventListener("click",()=>{s.remove(),p.append(n),p.append(i),p.classList.add("hidden"),j.classList.remove("modal"),j.classList.add("hidden")}),p.addEventListener("submit",r=>{r.preventDefault(),es(r,e.id),setTimeout(()=>{window.location.reload()},1e3)})})},{editAvatar:ds}=G,{update:Fe}=E,is=e=>{e.addEventListener("click",d=>{d.stopImmediatePropagation(),$.classList.remove("hidden"),$.classList.add("modal");const s=t("i",{class:"fa-solid fa-xmark fa-xl text-almostWhite absolute p-4 aspect-square right-5 top-5 h-7 hover:bg-auctionGreen"});$.append(F,s);const n=F.media,i=F.avatar;s.addEventListener("click",()=>{$.classList.add("hidden"),$.classList.remove("modal")}),n.addEventListener("input",Tt(o=>{i.src=o.target.value},1e3)),F.addEventListener("submit",o=>{o.preventDefault(),Fe.body=JSON.stringify({avatar:n.value}),g(ds,Fe).then(a=>{console.log(a),zt("avatar"),T("avatar",a.avatar),setTimeout(()=>{window.location.reload()},1e3)})})})},Wt=t("div",{class:"w-full  lg:w-2/4 sm:w-3/4 self-center flex flex-wrap"}),Nt=t("img",{class:"w-1/3 sm:w-1/2 apect-square mx-auto border rounded-lg max-w-lg"}),Ct=t("div",{class:"w-2/3 sm:w-1/2 text-auctionGrey sm:grid sm:grid-rows-4 p-2"}),Dt=t("h2",{class:" text-auctionGrey text-xl "}),Ae=t("button",{class:"border bg-auctionGrey text-almostWhite h-8 m-0 text-sm w-1/2 self-end"});Ae.innerHTML="Edit avatar";is(Ae);const Ft=t("p",{class:" text-auctionGrey"}),Ot=t("p",{class:" text-auctionGrey"});Ct.append(Dt,Ft,Ot,Ae);const Rt=t("div",{class:"w-full   my-5"}),Ie=t("button",{class:" px-3 py-2 bg-auctionGreen rounded mx-auto border-none w-full"});Rt.append(Ie,h);Ie.innerHTML="Add listing";Wt.append(Nt,Ct,Rt);const Pt=t("div",{class:"py-20"}),Ut=t("h2",{class:"text-lg text-auctionGrey "});Ut.innerHTML="Your listings";const Jt=t("div",{class:"w-full flex justify-start"}),Q=t("button",{class:"rounded-xl bg-auctionBlue  mx-1 md:w-40 py-1 w-1/4"});Q.innerHTML="Acitve";const X=t("button",{class:"rounded-xl bg-logoBg mx-1 py-1 md:w-40 w-1/4  "});X.innerHTML="All";Jt.append(Q,X);Pt.append(Ut,Jt);const se=(e,d,s,n,i)=>{const o=t("div",{class:"w-full grid grid-rows-4 sm:grid-rows-1 sm:grid-cols-4 relative sm:h-40 border rounded border-auctionBrown border-1 my-2"}),a=t("img",{class:"h-20 w-20 aspect-square object-cover m-auto"});a.src=e;const c=t("div",{class:"flex flex-col justify-around"}),r=t("p",{class:"text-auctionGrey m-auto"});r.innerHTML=d;const u=t("p",{class:"text-auctionGrey m-auto"});u.innerHTML=s,c.append(r,u);const l=t("div",{class:"flex flex-col justify-around p-3"}),w=t("button",{class:"bg-auctionBlue text-auctionGrey w-1/2 mx-auto my-1",id:i});ss(w),w.innerHTML="Update";const q=t("button",{class:"bg-auctionRed text-auctionGrey w-1/2 mx-auto my-1",id:i});q.innerHTML="Delete",Xn(q),l.append(w,q);const qe=t("div",{class:"flex p-3"}),ne=t("a",{class:"text-auctionGrey m-auto bg-veryLightGrey h-1/2 w-full border rounded-lg items-center flex place-content-center"});return ne.href=n,ne.innerHTML="Visit",qe.append(ne),o.append(a,c,l,qe),o},_t=e=>L(e)<0?"<span class='bg-red-300 bg-opacity-30 p-2 text-auctionGrey'>FINISED</span>":"<span class='bg-auctionGreen bg-opacity-30 p-2 text-auctionGrey'>ACTIVE</span>",os=e=>!(L(e)<0),F=t("form",{id:"avatarForm",class:"w-2/3 h-2/3 rounded-sm bg-logoBg flex flex-col align-items-center relative"}),as=t("input",{class:" bg-almostWhite my-2 rounded p-1 text-black ",type:"url",name:"media",id:"avatarInput",placeholder:"avatar URL"}),Yt=t("button",{type:"submit",class:"bg-auctionBlue rounded-none w-40 mx-auto my-5"});Yt.innerHTML="Update";const Vt=t("img",{class:"w-1/2 rounded-lg m-2",name:"avatar"});Vt.src=A("avatar");F.append(Vt,as,Yt);const Oe=(e,d,s,n)=>{e.remove(),e.innerHTML="",d.append(e),s.forEach(i=>{e.insertAdjacentElement("beforeend",n(i.media[0],i.title,_t(i.endsAt),`../item?id=${i.id}`,i.id))})},{account:rs}=G,{getWithJwt:cs}=E,J=t("div",{class:""}),j=t("div",{class:"w-full aspect-square hidden"}),p=h.cloneNode(!0),$=t("div",{class:"w-full aspect-square hidden"}),ls=async()=>{document.body.append(j,$),f.classList.add("min-h-screen"),document.title="Profile | AuctionHouse",M.innerHTML="Your details",p.id="updateForm",j.append(p),f.append(Wt,Pt,J);const e=[],d=[];await g(rs,cs).then(s=>{console.log(s),Nt.src=s.avatar,Dt.innerHTML=s.name,Ft.innerHTML=s.email,Ot.innerHTML="Your wallet "+s.credits+"$",s.listings.forEach(n=>{J.insertAdjacentElement("beforeend",se(n.media[0],n.title,_t(n.endsAt),`../item?id=${n.id}`,n.id)),os(n.endsAt)&&e.push(n),d.push(n)})}),Q.append("("+e.length+")"),X.append("("+d.length+")"),Q.addEventListener("click",()=>{Oe(J,f,e,se)}),X.addEventListener("click",()=>{Oe(J,f,d,se)}),Ie.addEventListener("click",s=>{h.classList.toggle("hidden")}),h.addEventListener("submit",s=>{s.preventDefault(),Pn(s),setTimeout(()=>{document.location.reload()},500)})},us=()=>{b.innerHTML="",y.innerHTML="",ls()},ms=()=>{A("authed")==="false"||A("authed")===null?_.addEventListener("click",()=>{y.innerHTML="",b.innerHTML="",M.innerHTML="LOGIN",Dn(),On()}):_.addEventListener("click",()=>{us(),T("page","profile"),_.remove(),sn.insertAdjacentElement("afterbegin",oe),oe.classList.remove("hidden"),f.classList.remove("hidden","sm:hidden","md:hidden","lg:hidden"),b.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),y.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),v.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),x.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),m.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),B.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),H.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),T("ghostButton","activated")})},hs=()=>{oe.addEventListener("click",()=>{f.classList.remove("hidden","sm:hidden","md:hidden","lg:hidden"),b.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),y.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),v.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),x.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),m.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),B.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),H.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),S.classList.remove("bg-auctionBlue"),k.classList.remove("bg-auctionBlue")})},ps=()=>{y.innerHTML="",y.insertAdjacentElement("beforeend",It)},gs=()=>{ie.addEventListener("click",()=>{y.innerHTML="",b.innerHTML="",f.innerHTML="",M.innerHTML="Create Account",ps()})},bs=()=>{In(),ms(),gs(),hs()};bs();Sn();An();Ln();
