(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerpolicy&&(r.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?r.credentials="include":i.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=s(i);fetch(i.href,r)}})();const T=e=>{try{return JSON.parse(localStorage.getItem(e))}catch{return null}},sn=e=>localStorage.removeItem(e),y=(e,o)=>{localStorage.setItem(e,JSON.stringify(o))},E={base:"https://api.noroff.dev/api/v1/auction/",register:"auth/register",login:"auth/login",account:"profiles/"+T("name")+"?_listings=true",listings:"listings",profiles:"profiles",editAvatar:"profiles/"+T("name")+"/media"},{base:Ve}=E,U={"Content-Type":"application/json",Authorization:`Bearer ${T("auctionToken")}`},L={registerLogin:{method:"POST",headers:{"Content-Type":"application/json"},body:{}},getWithJwt:{method:"GET",headers:U},entry:{method:"POST",headers:U,body:{}},update:{method:"PUT",headers:U,body:{}},deleteOpt:{method:"DELETE",headers:U},react:{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("socialToken")}`}}},g=async(e,o)=>{try{return await(await fetch(Ve+e,o)).json()}catch(s){console.error(s)}},ve=()=>{document.querySelectorAll(".fa-expand").forEach(o=>{o.addEventListener("click",s=>{const n=document.createElement("div");n.setAttribute("class","modal"),document.querySelector("main").append(n);const r=s.currentTarget.nextElementSibling.nextElementSibling.cloneNode(!0);n.append(r),n.addEventListener("click",()=>{document.querySelector(".modal").remove()})})})},t=(e,o)=>{const s=document.createElement(e);for(const n in o)s.setAttribute(n,o[n]);return s},ze=1e3,Y=ze*60,N=Y*60,Ke=N*24,f=e=>{const o=new Date(e),s=new Date;return o-s},on=(e,o)=>{const s=Math.floor(f(e)%Ke/N);let n;return o.length>0?n=o[o.length-1].amount:n="0",s<0?'<span class="bg-auctionRed text-auctionGrey">SOLD</span>':"<span>"+s+" hours left</span><span>Bid:"+n+"$</span>"},rn=(e,o)=>{const s=Math.floor(f(e)%N/Y);let n;return o.length>0?n=o[o.length-1].amount:n="0",s<0?'<span class="bg-auctionRed text-auctionGrey">SOLD</span>':"<span>"+s+" min left</span><span>Bid:"+n+"$</span>"},an=e=>{let o=[...e];for(let s=0;s<o.length;s++){let n=!1;for(let i=0;i<o.length;i++)if(o[i]>o[i+1]){let r=o[i];o[i]=o[i+1],o[i+1]=r,n=!0}if(!n)return o}return o},le=e=>`
  <div
    class="relative aspect-square lg:aspect-square flex flex-col items-center mb-2 shrink justify-between bg-almostWhite overflow-auto hover:overflow-scrollborder-5">
    <i class="absolute fa-sharp fa-solid fa-expand top-5 right-5 text-black fa-lg" id="${e.id}"></i>
    <p class="absolute text-almostWhite p-1 bg-auctionBrown  left-0 bottom-20">${e.title}</p>
    <img
      src="${e.media[0]}"
      alt="" class="itemImage object-top  object-cover h-2/3 shrink min-w-full img${e.id}">
     <div class="flex text-auctionBlue min-w-full justify-around">
         <div class="flex flex-col m-0 p-0">
         ${on(e.endsAt,e.bids)}
         </div>
       <button id=${e.id}" class="bg-auctionGrey p-1 mb-5 rounded-sm text-almostWhite font-bold item${e.id}">view item</button>
    </div>
  </div>
    `,cn=document.querySelector("#home-link"),dn=document.querySelector("#filters"),C=document.querySelector("#searchFilters"),Qe=document.querySelector("#searchForm"),b=document.querySelector("#searchResults"),S=document.querySelector(".itemContainer"),Xe=document.querySelector("#itemContainer1"),ln=document.querySelector("#itemContainer2"),Ze=document.querySelector("#itemContainer3"),Le=document.querySelector("#registerContainer"),Z=document.querySelector("#userContainer");let A=document.querySelector("#listingsFeed");const h=document.querySelector("#listingHeader");document.querySelector("#filter-link-1");const j=document.querySelector("#nav-link-1"),V=document.querySelector("#nav-link-2"),un=document.querySelector("main"),w=document.querySelector("#profileContainer"),mn=document.querySelector("#navWithBar"),k=document.querySelector("#expireSoonFeed"),M=document.querySelector("#newListingsFeed"),pn=document.querySelector("#divWithRegisterButton"),Ne=document.querySelector("#divWithLoginButton"),gn=document.querySelector("#bar"),re=document.querySelector("#zoomglass"),Ce=document.querySelector("#navWithSearch"),ae=document.querySelector("#stopSearch"),et=[b,w,Le,C,S,Xe,ln,Ze,Z,A,k,M],x=e=>{et.forEach(o=>{o.classList.add("hidden","sm:hidden","md:hidden","lg:hidden")}),e.classList.remove("hidden","sm:hidden","md:hidden","lg:hidden")},tt=(e,o)=>{const s=document.querySelector(".counterBox"+e),n=t("div",{class:"time flex flex-col"}),i=t("div",{class:"time flex flex-col"}),r=t("div",{class:"time flex flex-col"}),a=t("h2",{class:"mx-auto text-auctionRed"}),d=t("h2",{class:"mx-auto text-auctionRed"}),c=t("h2",{class:"mx-auto text-auctionRed"}),u=t("small",{class:"mx-auto text-auctionRed"}),l=t("small",{class:"mx-auto text-auctionRed"}),v=t("small",{class:"mx-auto text-auctionRed"});return u.innerHTML="hours",l.innerHTML="minutes",v.innerHTML="seconds",n.append(a,u),i.append(d,l),r.append(c,v),s.append(n,i,r),setInterval(()=>{c.innerHTML=Math.floor(f(o)%Y/ze),d.innerHTML=Math.floor(f(o)%N/Y),a.innerHTML=Math.floor(f(o)%Ke/N)},1e3),s},hn=(e,o,s)=>{e.forEach((n,i)=>{const r=t("button",{class:"border bg-auctionBlue aspect-square flex h-7 mx-3 place-content-center items-center border-2 border-almostWhite drop-shadow-md font-bold"});r.innerHTML=i+1,s.append(r),r.addEventListener("click",d=>{document.querySelector(".bg-auctionBlue").classList.add("bg-slate-400"),document.querySelector(".bg-auctionBlue").classList.remove("bg-auctionBlue"),d.currentTarget.classList.remove("bg-slate-400"),d.currentTarget.classList.add("bg-auctionBlue"),document.querySelector(".currentImg").classList.add("hidden"),document.querySelector(".currentImg").classList.remove("currentImg"),document.getElementById(d.currentTarget.innerHTML).classList.remove("hidden"),document.getElementById(d.currentTarget.innerHTML).classList.add("currentImg")});const a=t("img",{class:" object-top  object-cover h-2/3 shrink w-4/5 mx-auto currentImg aspect-square drop-shadow-md hidden",id:i+1});i===0&&a.classList.remove("hidden"),a.src=n,o.append(a),i!==0&&r.classList.add("bg-slate-400")})},{entry:De}=L,bn=(e,o)=>{const s=new FormData(e.currentTarget),n=Object.fromEntries(s.entries()),{amount:i}=n;De.body=JSON.stringify({amount:Number(i)}),console.log(n),console.log(o),g(`listings/${o}/bids`,De).then(d=>{console.log(d)});const a=T("credits")-Number(i);y("credits",a)},fn=(e,o,s,n,i,r,a)=>{e.addEventListener("click",d=>{const c=document.createElement("div");c.setAttribute("class","modal"),c.classList.add("bg-auctionGrey"),document.querySelector("main").append(c);const u=B;c.append(u),nt.innerHTML=o,rt.innerHTML="Your bid: "+s+"$",st.src=r,ot.innerHTML="<span class='underline underline-offset-2 '>current status</span>"+rn(n,i),it.innerHTML="Your credits "+T("credits")+"$",at.value=s,ye.addEventListener("click",()=>{document.querySelector(".modal").remove(),window.location.reload()}),document.getElementById("modalSubmit").addEventListener("submit",l=>{l.preventDefault(),l.stopImmediatePropagation(),bn(l,a),ue.classList.remove("bg-orange-300"),ue.classList.add("bg-green-200"),setTimeout(()=>{window.location.reload()},1500)})})},B=t("form",{class:"bg-almostWhite w-4/5 md:w-1/2 h-2/3 mx-auto justify-around flex flex-col my-2 p-5 relative bg-auctionWhite",id:"modalSubmit"}),ye=t("i",{class:" text-auctionRed absolute p-4 aspect-square right-0 top-0 h-7"});ye.innerHTML="<i class='fa-solid fa-xmark fa-xl'></i>";const nt=t("h2",{class:"text-logoBg font-bold w-full text-xl mx-auto my-2 p-1 flex place-content-center "}),st=t("img",{class:"object-top  object-cover h-2/3 shrink w-4/5 mx-auto currentImg aspect-square drop-shadow-md"}),ot=t("h4",{class:" py-3 mx-auto text-lg flex place-content-center flex-col text-logoBg font-bold"}),it=t("h4",{class:"py-3 absolute left-0 top-1  text-logoBg font-bold"}),rt=t("h3",{class:"w-full py-3 mx-auto text-lg flex place-content-center text-logoBg font-bold"}),at=t("input",{id:"bidInput",name:"amount",type:"number",class:"bg-almostWhite border border-2 w-10 bg-white text-auctionGrey hidden",placeholder:"$"}),ue=t("input",{type:"submit",value:"Confirm",class:"border text-lg font-bold border-radius-sm bg-orange-300 text-auctionBrown py-2 px-4"});B.append(nt);B.append(ye);B.append(st);B.append(ot);B.append(it);B.append(rt);B.append(at);B.append(ue);t("input",{type:"submit",value:"Confirm",class:"border border-radius-sm bg-white text-auctionBlue px-2"});t("div",{class:"w-1/2 shrink flex justify-end p-2 gap-1"});const xn=t("label",{for:"bidInput",class:" text-auctionBrown text-base w-1/2 flex place-content-center items-center"});xn.textContent="Place a bid";const vn=(e,o,s,n,i,r,a,d)=>{e.addEventListener("keyup",c=>{c.stopImmediatePropagation();const u=c.currentTarget.value;u-1<o?(s.classList.remove("bg-white"),s.classList.add("bg-red-200"),s.setAttribute("disabled","disabled"),e.setAttribute("title","amount to low")):(s.classList.add("bg-white"),s.classList.remove("bg-red-200"),s.removeAttribute("disabled"),e.removeAttribute("title"),fn(s,n,u,i,r,a,d))})},ct=e=>{e.addEventListener("click",()=>{window.location.reload()}),e.innerHTML="&#x2190; back"},z=()=>!(localStorage.getItem("auctionToken")===null||localStorage.getItem("auctionToken")==="undefined"),Ln=(e,o,s)=>{s.length===0&&(o.remove(),e.remove()),s.forEach(n=>{o.insertAdjacentHTML("beforeend",`
        <div class="w-full text-auctionGrey flex">
        <p class="w-full text-auctionGrey text-center">${n.bidderName}</p>
        <p class="w-full text-auctionGrey text-center">${n.amount} $</p>
        </div>
        `)}),e.addEventListener("click",n=>{o.classList.toggle("hidden")})},yn=t("div",{class:"counterBox w-full grid grid-cols-3  my-5 p-0"}),dt=t("p",{class:"text-auctionGrey"}),me=t("p",{class:"text-auctionGrey"}),lt=t("div",{class:"w-full bg-green-200 flex justify-around md:w-3/4 mx-auto my-2  flex-wrap "});lt.append(dt,me);const we=t("button",{class:"px-1 mx-auto text-auctionGrey rounded-sm text-sm bg-auctionYellow mx-auto"});we.innerHTML="View all bids &darr;";const ut=t("div",{class:"text-auctionGrey w-full hidden bg-auctionYellow w-1/2 mx-auto",id:"bid-section"}),mt=t("input",{id:"bidInput",name:"amount",type:"number",class:"bg-almostWhite border border-2 w-10 bg-white text-auctionGrey",placeholder:"$"}),pt=t("input",{type:"button",value:"SUBMIT",class:"border border-radius-sm bg-white text-auctionBlue px-2"}),Te=t("div",{class:"w-1/2 shrink flex justify-end p-2 gap-1"}),Be=t("label",{for:"bidInput",class:" text-auctionBrown text-base w-1/2 flex place-content-center items-center"});Be.textContent="Place a bid";const gt=t("div",{class:"bg-auctionBlue w-full bg-opacity-50 md:w-3/4 mx-auto flex my-2 p-1"}),_=t("div",{class:""}),ht=t("h1",{class:"text-auctionBlue block text-xl mx-auto flex place-content-center"}),ce=t("p",{class:"text-auctionBrown mx-auto"}),He=t("div",{class:"flex place-content-center align-center my-5 flex-wrap"}),bt=t("small",{class:"text-auctionGrey w-full flex place-content-center"});bt.innerHTML="images";He.append(bt);const ft=t("div",{class:"bg-white p-5 mx-auto flex flex-col   md:w-4/5 border border-auctionBrown rounded-lg drop-shadow-sm my-10"}),Me=t("div",{class:"mx-auto my-5 md:w-4/5 flex flex-wrap divide-x divide-slate-200"}),xt=t("h3",{class:"text-md text-auctionBlue w-full"});xt.innerHTML="Description";const vt=t("p",{class:"text-auctionGrey w-1/2 p-1"});Me.append(xt);const Lt=t("p",{class:"text-auctionGrey w-1/2 p-1"});Me.append(vt,Lt);Te.append(mt,pt);gt.append(Be,Te);ft.append(ht,He,_,yn,lt,we,ut,gt,Me);const Se=t("div",{class:"w-full flex lg:w-2/4 md:w-3/4 self-center"}),yt=t("img",{class:"w-1/2 apect-square mx-auto border rounded-lg max-w-lg"}),wt=t("h2",{class:"w-1/2 mx-auto text-auctionGrey text-xl flex items-center place-content-center"});Se.append(yt);Se.append(wt);const pe=t("div",{class:"py-20"}),Tt=t("h2",{class:"text-lg text-auctionGrey"});pe.append(Tt);const wn=(e,o,s,n)=>{const i=t("button",{class:`w-full grid grid-cols-3 relative h-24 items-center border rounded border-auctionBrown my-2 place-content-center itemm${e}`}),r=t("img",{class:"h-12 w-12 aspect-square object-cover mx-auto"});r.src=o;const a=t("p",{class:"text-auctionGrey"});a.innerHTML=s;const d=t("p",{class:"text-auctionGrey"});return d.innerHTML=n,i.append(r,a,d),i},Fe=e=>f(e)<0?"<span class='bg-red-300 bg-opacity-30 p-2 text-auctionGrey'>FINISED</span>":"<span class='bg-auctionGreen bg-opacity-30 p-2 text-auctionGrey'>ACTIVE</span>",ge=t("div",{class:"py-10"}),Bt=t("h2",{class:"text-lg text-auctionGrey "});ge.append(Bt);const Tn=(e,o,s)=>{const n=t("a",{class:"w-full grid grid-cols-3 relative h-20 items-center border rounded border-auctionBrown my-2 place-content-center"});n.href=e;const i=t("p",{class:"text-auctionGrey"});i.innerHTML=o;const r=t("p",{class:"text-auctionGrey"});return r.innerHTML=s,n.append(i,"-",r),n},Bn=(e,o)=>{document.querySelector(".itemm"+e).addEventListener("click",()=>{Ht(e,o),S.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),Xe.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),Z.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),w.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),b.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),A.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),k.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),M.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),C.classList.add("hidden","sm:hidden","md:hidden","lg:hidden")})},{getWithJwt:Oe}=L,Hn=e=>{ct(h);const o=`profiles/${e}?_listings=true `,s=`profiles/${e}/bids?_listings=true`;Z.append(Se,pe,ge),g(o,Oe).then(n=>{yt.src=n.avatar,wt.innerHTML=n.name,Tt.innerHTML=n.name+"'s listings",n.listings.forEach(i=>{pe.insertAdjacentElement("beforeend",wn(i.id,i.media[0],i.title,Fe(i.endsAt))),Bn(i.id,Ze)})}),g(s,Oe).then(n=>{Bt.innerHTML=n[0].bidderName+" made bid's on these listings",n.forEach(i=>{ge.insertAdjacentElement("beforeend",Tn(`../item?id=${i.listing.id}`,i.listing.title,Fe(i.listing.endsAt)))})})},Mn=(e,o)=>{document.querySelector(".user"+e).addEventListener("click",()=>{Hn(o),S.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),Z.classList.remove("hidden","sm:hidden","md:hidden","lg:hidden"),w.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),b.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),A.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),k.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),M.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),C.classList.add("hidden","sm:hidden","md:hidden","lg:hidden")})},Ht=(e,o)=>{h.innerHTML="",document.title="Item | AuctionHouse";const s=`listings/${e}?_seller=true&_bids=true`;ct(h),o.append(ce,ft),g(s).then(n=>{var d;n.media.length>0?hn(n.media,_,He):(_.innerHTML="No images added to this listing",_.classList.add("text-auctionGrey"));const i=n.endsAt;ht.innerHTML=n.title,z()?ce.innerHTML=`<button class="border border-black px-2 rounded-none user${n.seller.name}" id"../user/${n.seller.name}"><span class="text-auctionGrey">seller: </span class="font-bold text-lg">${n.seller.name}</button>`:ce.innerHTML=`<button disabled="disabled">${n.seller.name} <span class="text-auctionGrey">(log in to visit ) </span></button>`,f(n.endsAt)>0&&tt("",i),dt.innerHTML="Highest bid",n.bids.length>0?me.innerHTML=n.bids[n.bids.length-1].bidderName+": "+n.bids[n.bids.length-1].amount+"$":me.innerHTML=0+"$",vt.innerHTML=n.description,Lt.innerHTML="tags: "+n.tags.toString(""),f(n.endsAt)<0&&(Te.innerHTML="Not possible to bid on this item");const a=((d=n.bids[n.bids.length-1])==null?void 0:d.amount)??0;z()?vn(mt,a,pt,n.title,n.endsAt,n.bids,n.media[0],n.id):Be.innerHTML="log in to bid",Ln(we,ut,n.bids),Mn(n.seller.name,n.seller.name)})},Ee=e=>{document.querySelector(".item"+e).addEventListener("click",()=>{const s=S.cloneNode(!0);un.append(s),et.push(s),Ht(e,s),x(s)})},Re=async e=>{await g("listings?_bids=true&sort=created&sortOrder=desc").then(o=>{const s=o.filter(n=>n.bids.length>0);for(let n=0;n<s.length;n++){const i=s[n];if(n===10)break;A.insertAdjacentHTML("beforeend",le(i)),Ee(i.id)}}),ve()},Sn=()=>{j.textContent="Profile",V.addEventListener("click",()=>{localStorage.clear(),document.location.reload()}),V.textContent="Logout",document.title="Feed | AuctionHouse"},En=()=>{T("authed")===null?Re():z()&&(Re(),Sn())},D=t("button",{class:"text-almostWhite bg-logoBg w-1/4 newest  rounded-none px-1 border-none mx-auto w-30 enabled:hover:outline-none",id:"filter-link-1"});D.innerHTML="Newest";const F=t("button",{class:"text-almostWhite expire bg-logoBg w-1/4  rounded-none px-1 border-none mx-auto w-30 enabled:hover:outline-none",id:"filter-link-2"});F.innerHTML="Expiring today";const ke=t("nav",{class:""}),Mt=t("div",{class:"flex self-center"}),St=t("p",{class:"text-logoBg m-auto"});St.innerHTML="sort by";const O=t("div",{class:"flex flex-col md:flex-row md:pb-0 pb-0 gap-2"});Mt.append(St);O.append(F);O.append(D);ke.append(Mt);ke.append(O);const he=t("button",{class:"px-5 border border-1 text-logoBg py-2 mx-auto block"});he.innerHTML="Next";const G=t("button",{class:"border border-logoBg py-1 mx-2 w-20 enabled:hover:outline-none text-black"});G.innerHTML="titles";const $=t("button",{class:"border border-logoBg py-1 mx-2 w-20 enabled:hover:outline-none text-black"});$.innerHTML="users";const P=t("button",{class:"border border-logoBg py-1 mx-2 w-20 enabled:hover:outline-none text-black"});P.innerHTML="tags";const Et=(e,o,s,n)=>{const i=t("button",{class:`w-full searchItem${e} grid grid-cols-3 relative h-24 items-center border rounded border-auctionBrown my-2 place-content-center`});i.href=e;const r=t("img",{class:"h-12 w-12 aspect-square object-cover mx-auto"});r.src=o;const a=t("p",{class:"text-auctionGrey"});a.innerHTML=s;const d=t("p",{class:"text-auctionGrey"});return d.innerHTML=n,i.append(r,a,d),i},kt=e=>f(e)<0?"<span class='bg-red-300 bg-opacity-30 p-2 text-auctionGrey'>FINISED</span>":"<span class='bg-auctionGreen bg-opacity-30 p-2 text-auctionGrey'>ACTIVE</span>",kn=(e,o,s)=>{const n=t("button",{class:`w-full grid grid-cols-2 nameIs${e} relative h-24 items-center border rounded border-auctionBrown my-2 place-content-center`}),i=t("img",{class:"h-12 w-12 aspect-square object-cover mx-auto"});i.src=o;const r=t("p",{class:"text-auctionGrey"});return r.innerHTML=s,n.append(i,r),n},An=()=>{Qe.addEventListener("input",()=>{b.innerHTML=`<div class="h-screen flex items-start place-content-center">
            <div class="relative w-24 h-24 animate-spin rounded-full bg-gradient-to-r from-auctionGreen via-logoBg to-auctionBlue ">
            <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-20 h-20 bg-gray-200 rounded-full border-2"></div>
            </div>
            </div>`,x(C),C.append(G,P,$),te.classList.remove("bg-auctionBlue"),ee.classList.remove("bg-auctionBlue"),b.classList.remove("hidden","sm:hidden","md:hidden","lg:hidden")})},At=async(e,o)=>{let s=e;M.innerHTML="",h.innerHTML="Recently added items",await g("listings?_bids=true&sort=created&sortOrder=desc").then(i=>{const r=i.filter(a=>a.media[0]!==void 0);for(s;s<o;s++){const a=r[s];le(a),M.insertAdjacentHTML("beforeend",le(a)),Ee(a.id)}}),ve(),M.insertAdjacentElement("afterend",he);let n=0;he.addEventListener("click",i=>{i.stopImmediatePropagation(),n++,At(14*n,28*n)})},qn=e=>`
    <div
    class="relative aspect-square lg:aspect-square flex flex-col items-center mb-2 shrink justify-between bg-almostWhite overflow-auto hover:overflow-scrollborder-5">
    <i class="absolute fa-sharp fa-solid fa-expand top-5 right-5 text-black fa-lg" id="${e.id}"></i>
    <p class="absolute text-almostWhite p-1 bg-auctionBrown  left-0 bottom-20">${e.title}</p>
    <img 
      src="${e.media[0]}"
      alt="" class="itemImage object-top  object-cover h-2/3 shrink min-w-full img${e.id}">
    <div class="flex text-auctionBlue min-w-full justify-around counterB">
    <div class="grid grid-cols-3  m-0 p-0 w-1/2 counterBox${e.id}">
    </div>
    <button id="${e.id}" class="bg-auctionGrey p-1 mb-5 rounded-sm text-almostWhite item${e.id}">view item</button>
    </div>
  </div>
    `,In=async(e,o)=>{let s=[],n=e;k.innerHTML="",h.innerHTML="Expires today",await g("listings?_bids=true&sort=created&sortOrder=desc").then(i=>{const r=i.filter(c=>f(c.endsAt)<864e5&&f(c.endsAt)>0),a=[];r.forEach(c=>{a.push(c.endsAt)});const d=an(a);for(let c=0;c<d.length;c++){const u=d[c];for(let l=0;l<r.length;l++){let v=r[l];r[l].endsAt===u&&!s.includes(r[l])&&s.push(v)}}for(n=0;n<o;n++){const c=s[n];if(c===void 0)break;const u=c.endsAt,l=c.id;k.insertAdjacentHTML("beforeend",qn(c)),tt(l,u),Ee(l)}}),ve()},qt=(e,o=0)=>{let s;return function(...n){clearTimeout(s),s=setTimeout(()=>e.apply(this,n),o)}},Gn=e=>{G.addEventListener("click",o=>{o.currentTarget.classList.add("bg-auctionBlue"),P.classList.remove("bg-auctionBlue"),$.classList.remove("bg-auctionBlue"),b.innerHTML="",setTimeout(()=>{(b.innerHTML.includes("-translate-x-1/2")||b.innerHTML==="")&&(b.innerHTML="<p class='font-bold text-black mx-auto'>No results. <a href='/'>Go back</a></p>")},1500),e.forEach(s=>{b.insertAdjacentElement("beforeend",Et(s.id,s.media[0],s.title,kt(s.endsAt)))})}),G.click(),h.innerHTML="Search by title"},$n=e=>{P.addEventListener("click",o=>{h.innerHTML="Search by tags",o.currentTarget.classList.add("bg-auctionBlue"),G.classList.remove("bg-auctionBlue"),$.classList.remove("bg-auctionBlue"),b.innerHTML="",e.forEach(s=>{b.insertAdjacentElement("beforeend",Et(s.id,s.media[0],s.title,kt(s.endsAt)))})})},jn=e=>{$.addEventListener("click",o=>{h.innerHTML="Search by user",o.currentTarget.classList.add("bg-auctionBlue"),G.classList.remove("bg-auctionBlue"),P.classList.remove("bg-auctionBlue"),b.innerHTML="",e.forEach(s=>{b.insertAdjacentElement("beforeend",kn(s.name,s.avatar,s.name))})})},{getWithJwt:Wn}=L,Nn=()=>{Qe.addEventListener("input",qt(e=>{Cn(e)},1e3))},Cn=e=>{g("listings").then(o=>{const s=o.filter(i=>Boolean(i.tags.map(a=>a.toLowerCase()).filter(a=>a.includes(e.target.value)).length)),n=o.filter(i=>i.title.includes(e.target.value));Gn(n),$n(s)}),z()?g("profiles",Wn).then(o=>{const s=o.filter(n=>n.name.includes(e.target.value));jn(s),console.log(o)}):$.remove()},R=(e,o,s,n,i,r)=>{const a=e.cloneNode(!0);a.addEventListener("click",()=>{i()}),e.remove(),o.insertAdjacentElement(s,a),a.classList.add(n),r&&(a.innerHTML=r)},ee=F.cloneNode(!0);ee.innerHTML="Expiring today";ee.id="newExB";const te=D.cloneNode(!0);te.innerHTML="Newest";te.id="newNewBtn";const Dn=()=>{dn.insertAdjacentElement("beforeend",ke),D.addEventListener("click",e=>{R(D,O,"beforeend","bg-auctionBlue",()=>{x(M),h.innerHTML="New Listings",document.querySelector(".expire").classList.remove("bg-auctionBlue")},"Newest"),x(M),At(0,16),document.querySelector(".expire").classList.remove("bg-auctionBlue")}),F.addEventListener("click",e=>{R(F,O,"afterbegin","bg-auctionBlue",()=>{x(k),h.innerHTML="Expires today",document.querySelector(".newest").classList.remove("bg-auctionBlue")},"Expiring today"),x(k),In(0,14),document.querySelector(".newest").classList.remove("bg-auctionBlue")}),An(),Nn()},Fn=()=>{cn.addEventListener("click",()=>{document.location.reload()})},It=t("div",{class:"mx-auto w-full mt-15  md:mx-auto md:w-1/2"}),ne=t("form",{class:"mt-8 space-y-6 flex flex-col justify-center",method:"POST"}),Gt=ne.cloneNode(!0),se=t("div",{class:""}),On=t("input",{class:"bg-logoBg relative block w-full appearance-none border border-auctionBlue px-3 py-2 focus:outline-auctionBrown",type:"email",placeholder:"email",name:"email",pattern:"^[\\w\\-.]+@(stud.)?noroff.no$",title:"use a @stud.noroff.no mail-adress",required:"required"}),$t=se.cloneNode(!0);se.append(On);const Rn=t("input",{class:"bg-logoBg relative block w-full appearance-none border border-auctionBlue px-3 py-2 focus:outline-auctionBrown",title:"uppercase, lowercase and (_) allowed",placeholder:"name",type:"text",name:"name",pattern:"[\\w]+$"}),Pn=se.cloneNode(!0);$t.append(Rn);const Ae=t("div",{class:""}),Un=t("input",{class:"bg-logoBg relative block w-full appearance-none border border-auctionBlue px-3 py-2 focus:outline-auctionBrown",type:"password",placeholder:"password",name:"password",minlength:"8",required:"required"});Ae.append(Un);const Jn=Ae.cloneNode(!0),qe=t("button",{type:"submit",class:"bg-auctionBlue text-almostWhite p-1  rounded-sm  mx-auto"});qe.innerHTML="Login";const jt=qe.cloneNode(!0);jt.innerHTML="Register";const oe=t("div",{class:"bg-auctionBlue rounded text-center hidden",id:"login-success-alert"}),Wt=oe.cloneNode(!0);Wt.innerHTML="Account successfully created";oe.innerHTML="Login successful";const K=t("div",{class:"bg-auctionRed rounded text-center hidden",id:"login-warning-alert"});ne.append(se,Ae,qe,oe,K);const Nt=t("div",{class:"flex flex-col items-center justify-between mt-3"}),Ct=t("span",{class:"text-auctionGrey mx-auto"});Ct.innerHTML="OR";const _n=t("div",{class:"text-md mt-5 mx-auto"}),Ie=t("a",{class:"text-almostWhite bg-auctionGrey opacity-50 p-1 ml-1 rounded-sm hover:text-indigo-500",href:"./register"});Ie.innerHTML="Create an accocunt";_n.append(Ie);Nt.append(Ct,Ie);It.append(ne,Nt);const Dt=t("div",{class:"mx-auto w-full mt-15  md:mx-auto md:w-1/2"}),Yn=K.cloneNode(!0);Gt.append($t,Pn,Jn,jt,Wt,Yn);Dt.append(Gt);const Vn=()=>{S.insertAdjacentElement("beforeend",It)},{login:zn}=E,{registerLogin:Pe}=L,Kn=()=>{ne.addEventListener("submit",e=>{e.preventDefault();const o=new FormData(e.currentTarget),s=Object.fromEntries(o.entries()),{email:n}=s;Pe.body=JSON.stringify(s),g(zn,Pe).then(i=>{if(i.email===n){const{name:r,email:a,credits:d,avatar:c,accessToken:u}=i;console.log(i),oe.classList.remove("hidden"),y("auctionToken",u),y("name",r),y("credits",d),y("email",a),y("avatar",c),setTimeout(()=>{y("authed","true"),y("page","index"),window.location.reload()},2e3)}else i.statusCode===401&&(K.classList.remove("hidden"),K.textContent=i.errors[0].message)})})},{entry:Ue}=L,{listings:Qn}=E,Xn=e=>{const o=new FormData(e.currentTarget),s=Object.fromEntries(o.entries()),{date:n,tags:i,title:r,description:a}=s,c=new Date(n).toJSON();let u=[],l=i.split(",");document.querySelectorAll("[name='media'").forEach(H=>{H.value.length>0&&u.push(H.value)}),Ue.body=JSON.stringify({title:r,description:a,tags:l,media:u,endsAt:c}),g(Qn,Ue).then(H=>{console.log(H)})},m=t("form",{class:" hidden mt-8 bg-logoBg p-3 relative flex flex-col justify-center mx-auto md:w-2/3 w-full",id:"newItem",method:"post",required:"required"}),Ft=t("small",{class:"text-almostWhite mx-auto mt-2"});Ft.innerHTML="Title";const Zn=t("input",{class:"bg-almostWhite mt-2 rounded p-1 text-black py-1",type:"text",name:"title",id:"titleInput",placeholder:"Title",required:"required"}),Ot=t("small",{class:"text-almostWhite mx-auto mt-2"});Ot.innerHTML="tags";const es=t("input",{class:"bg-almostWhite mt-2 rounded p-1 text-black py-1",type:"text",name:"tags",id:"tagsInput",placeholder:"tags"}),Rt=t("small",{class:"text-almostWhite mx-auto mt-2"});Rt.innerHTML="Description";const ts=t("input",{class:"bg-almostWhite mt-2 rounded p-1 text-black py-1",type:"text",name:"description",id:"descriptionInput",placeholder:"description"}),Pt=t("small",{class:"text-almostWhite mx-auto mt-2"});Pt.innerHTML="Image URL's";const ns=t("input",{class:"bg-almostWhite mt-2 rounded p-1 text-black py-1",type:"url",name:"media",id:"mediaInput",placeholder:"media URL"}),be=t("input",{class:"hidden bg-almostWhite mt-2 rounded p-1 text-black py-1",type:"url",name:"media",id:"mediaInput1",placeholder:"media URL",disabled:"disabled"}),fe=t("input",{class:"hidden bg-almostWhite mt-2 rounded p-1 text-black py-1",type:"url",name:"media",id:"mediaInput2",placeholder:"media URL",disabled:"disabled"}),xe=t("input",{class:"hidden bg-almostWhite mt-2 rounded p-1 text-black py-1",type:"url",name:"media",id:"mediaInput3",placeholder:"media URL",disabled:"disabled"}),ss=t("input",{class:"bg-almostWhite mt-2 rounded p-1 text-black py-1",type:"datetime-local",name:"date",id:"dateInput",placeholder:"ends at",required:"required"}),os=t("input",{class:"mt-2 rounded-none py-3 bg-auctionBlue",type:"submit",placeholder:"submit"}),Ge=t("button",{class:"text-sm p-0 m-0 border rounded-none mx-auto px-1 mt-1",type:"button"});Ge.innerHTML="Add photos &#8595";Ge.addEventListener("click",e=>{be.classList.remove("hidden"),fe.classList.remove("hidden"),xe.classList.remove("hidden"),be.removeAttribute("disabled"),fe.removeAttribute("disabled"),xe.removeAttribute("disabled"),e.currentTarget.classList.add("hidden")});m.append(Ft);m.append(Zn);m.append(Ot);m.append(es);m.append(Rt);m.append(ts);m.append(Pt);m.append(ns);m.append(be);m.append(fe);m.append(xe);m.append(Ge);m.append(ss);m.append(os);const{deleteOpt:is}=L,{listings:rs}=E,as=e=>{e.addEventListener("click",()=>{fetch(Ve+rs+"/"+e.id,is),setTimeout(()=>{window.location.reload()},500)})},{update:Je}=L,{listings:cs}=E,ds=(e,o)=>{const s=new FormData(e.currentTarget),n=Object.fromEntries(s.entries()),{tags:i,title:r,description:a}=n;let d=[],c=i.split(",");e.currentTarget.querySelectorAll("[name='media'").forEach(l=>{l.value.length>0&&d.push(l.value)}),Je.body=JSON.stringify({title:r,description:a,tags:c,media:d}),g(cs+"/"+o,Je).then(l=>{console.log(l)})},{listings:ls}=E,{getWithJwt:us}=L,ms=e=>{e.addEventListener("click",o=>{o.stopImmediatePropagation();const s=t("i",{class:"fa-solid fa-xmark fa-xl text-almostWhite absolute p-4 aspect-square right-0 top-0 h-7 hover:bg-auctionGreen"});p.append(s),p.classList.remove("hidden"),I.classList.add("modal"),I.classList.remove("hidden");const n=p.dateInput;n.remove();const i=p.querySelector("button");i.remove();const r=p.tags,a=Array.from(p.media);p.querySelectorAll(".hidden").forEach(c=>{c.classList.remove("hidden")}),g(ls+"/"+o.currentTarget.id,us).then(c=>{p.title.value=c.title,p.description.value=c.description,c.media.forEach((l,v)=>{a[v].value=l}),r.value=c.tags.join(", ")}),s.addEventListener("click",()=>{s.remove(),p.append(n),p.append(i),p.classList.add("hidden"),I.classList.remove("modal"),I.classList.add("hidden")}),p.addEventListener("submit",c=>{c.preventDefault(),ds(c,e.id),setTimeout(()=>{window.location.reload()},1e3)})})},{editAvatar:ps}=E,{update:_e}=L,gs=e=>{e.addEventListener("click",o=>{o.stopImmediatePropagation(),q.classList.remove("hidden"),q.classList.add("modal");const s=t("i",{class:"fa-solid fa-xmark fa-xl text-almostWhite absolute p-4 aspect-square right-5 top-5 h-7 hover:bg-auctionGreen"});q.append(W,s);const n=W.media,i=W.avatar;s.addEventListener("click",()=>{q.classList.add("hidden"),q.classList.remove("modal")}),n.addEventListener("input",qt(r=>{i.src=r.target.value},1e3)),W.addEventListener("submit",r=>{r.preventDefault(),_e.body=JSON.stringify({avatar:n.value}),g(ps,_e).then(a=>{console.log(a),sn("avatar"),y("avatar",a.avatar),setTimeout(()=>{window.location.reload()},1e3)})})})},Ut=t("div",{class:"w-full  lg:w-2/4 sm:w-3/4 self-center flex flex-wrap"}),Jt=t("img",{class:"w-1/3 sm:w-1/2 apect-square mx-auto border rounded-lg max-w-lg"}),_t=t("div",{class:"w-2/3 sm:w-1/2 text-auctionGrey sm:grid sm:grid-rows-4 p-2"}),Yt=t("h2",{class:" text-auctionGrey text-xl "}),$e=t("button",{class:"border bg-auctionGrey text-almostWhite h-8 m-0 text-sm w-1/2 self-end"});$e.innerHTML="Edit avatar";gs($e);const Vt=t("p",{class:" text-auctionGrey"}),zt=t("p",{class:" text-auctionGrey"});_t.append(Yt,Vt,zt,$e);const Kt=t("div",{class:"w-full   my-5"}),je=t("button",{class:" px-3 py-2 bg-auctionGreen rounded mx-auto border-none w-full"});Kt.append(je,m);je.innerHTML="Add listing";Ut.append(Jt,_t,Kt);const Qt=t("div",{class:"py-20"}),Xt=t("h2",{class:"text-lg text-auctionGrey "});Xt.innerHTML="Your listings";const Zt=t("div",{class:"w-full flex justify-start"}),Q=t("button",{class:"rounded-xl bg-auctionBlue  mx-1 md:w-40 py-1 w-1/4"});Q.innerHTML="Acitve";const X=t("button",{class:"rounded-xl bg-logoBg mx-1 py-1 md:w-40 w-1/4  "});X.innerHTML="All";Zt.append(Q,X);Qt.append(Xt,Zt);const de=(e,o,s,n,i)=>{const r=t("div",{class:"w-full grid grid-rows-4 sm:grid-rows-1 sm:grid-cols-4 relative sm:h-40 border rounded border-auctionBrown border-1 my-2"}),a=t("img",{class:"h-20 w-20 aspect-square object-cover m-auto"});a.src=e;const d=t("div",{class:"flex flex-col justify-around"}),c=t("p",{class:"text-auctionGrey m-auto"});c.innerHTML=o;const u=t("p",{class:"text-auctionGrey m-auto"});u.innerHTML=s,d.append(c,u);const l=t("div",{class:"flex flex-col justify-around p-3"}),v=t("button",{class:"bg-auctionBlue text-auctionGrey w-1/2 mx-auto my-1",id:i});ms(v),v.innerHTML="Update";const H=t("button",{class:"bg-auctionRed text-auctionGrey w-1/2 mx-auto my-1",id:i});H.innerHTML="Delete",as(H),l.append(v,H);const We=t("div",{class:"flex p-3"}),ie=t("a",{class:"text-auctionGrey m-auto bg-veryLightGrey h-1/2 w-full border rounded-lg items-center flex place-content-center"});return ie.href=n,ie.innerHTML="Visit",We.append(ie),r.append(a,d,l,We),r},en=e=>f(e)<0?"<span class='bg-red-300 bg-opacity-30 p-2 text-auctionGrey'>FINISED</span>":"<span class='bg-auctionGreen bg-opacity-30 p-2 text-auctionGrey'>ACTIVE</span>",hs=e=>!(f(e)<0),W=t("form",{id:"avatarForm",class:"w-2/3 h-2/3 rounded-sm bg-logoBg flex flex-col align-items-center relative"}),bs=t("input",{class:" bg-almostWhite my-2 rounded p-1 text-black ",type:"url",name:"media",id:"avatarInput",placeholder:"avatar URL"}),tn=t("button",{type:"submit",class:"bg-auctionBlue rounded-none w-40 mx-auto my-5"});tn.innerHTML="Update";const nn=t("img",{class:"w-1/2 rounded-lg m-2",name:"avatar"});nn.src=T("avatar");W.append(nn,bs,tn);const Ye=(e,o,s,n)=>{e.remove(),e.innerHTML="",o.append(e),s.forEach(i=>{e.insertAdjacentElement("beforeend",n(i.media[0],i.title,en(i.endsAt),`../item?id=${i.id}`,i.id))})},{account:fs}=E,{getWithJwt:xs}=L,J=t("div",{class:""}),I=t("div",{class:"w-full aspect-square hidden"}),p=m.cloneNode(!0),q=t("div",{class:"w-full aspect-square hidden"}),vs=async()=>{document.body.append(I,q),w.classList.add("min-h-screen"),document.title="Profile | AuctionHouse",h.innerHTML="Your details",p.id="updateForm",I.append(p),w.append(Ut,Qt,J);const e=[],o=[];await g(fs,xs).then(s=>{console.log(s),Jt.src=s.avatar,Yt.innerHTML=s.name,Vt.innerHTML=s.email,zt.innerHTML="Your wallet "+s.credits+"$",s.listings.forEach(n=>{J.insertAdjacentElement("beforeend",de(n.media[0],n.title,en(n.endsAt),`../item?id=${n.id}`,n.id)),hs(n.endsAt)&&e.push(n),o.push(n)})}),Q.append("("+e.length+")"),X.append("("+o.length+")"),Q.addEventListener("click",()=>{Ye(J,w,e,de)}),X.addEventListener("click",()=>{Ye(J,w,o,de)}),je.addEventListener("click",s=>{m.classList.toggle("hidden")}),m.addEventListener("submit",s=>{s.preventDefault(),Xn(s),setTimeout(()=>{document.location.reload()},500)})},Ls=()=>{A.innerHTML="",S.innerHTML="",vs()},ys=()=>{T("authed")==="false"||T("authed")===null?j.addEventListener("click",()=>{R(j,Ne,"afterbegin","newButton",()=>{x(S),h.innerHTML="Login"}),x(S),h.innerHTML="LOGIN",Vn(),Kn()}):j.addEventListener("click",()=>{R(j,Ne,"beforeend","profileButton",()=>{te.classList.remove("bg-auctionBlue"),ee.classList.remove("bg-auctionBlue"),x(w)},"Profile"),x(w),Ls()})},ws=()=>{Le.insertAdjacentElement("beforeend",Dt)},Ts=()=>{V.addEventListener("click",()=>{R(V,pn,"beforeend","newButton",()=>{x(Le),h.innerHTML="Create Account"},"Create Account"),A.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),h.innerHTML="Create Account",ws()})},Bs=()=>{gn.addEventListener("click",()=>{mn.classList.toggle("hidden")}),re.addEventListener("click",()=>{Ce.classList.remove("hidden"),ae.classList.remove("hidden"),re.classList.add("hidden")}),ae.addEventListener("click",()=>{ae.classList.add("hidden"),Ce.classList.add("hidden"),re.classList.remove("hidden"),x(A)})},Hs=()=>{Fn(),Bs(),ys(),Ts()};Hs();Dn();En();
