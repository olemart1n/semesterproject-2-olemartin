(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerpolicy&&(r.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?r.credentials="include":i.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=s(i);fetch(i.href,r)}})();const T=e=>{try{return JSON.parse(localStorage.getItem(e))}catch{return null}},en=e=>localStorage.removeItem(e),y=(e,o)=>{localStorage.setItem(e,JSON.stringify(o))},S={base:"https://api.noroff.dev/api/v1/auction/",register:"auth/register",login:"auth/login",account:"profiles/"+T("name")+"?_listings=true",listings:"listings",profiles:"profiles",editAvatar:"profiles/"+T("name")+"/media"},{base:Je}=S,U={"Content-Type":"application/json",Authorization:`Bearer ${T("auctionToken")}`},L={registerLogin:{method:"POST",headers:{"Content-Type":"application/json"},body:{}},getWithJwt:{method:"GET",headers:U},entry:{method:"POST",headers:U,body:{}},update:{method:"PUT",headers:U,body:{}},deleteOpt:{method:"DELETE",headers:U},react:{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("socialToken")}`}}},g=async(e,o)=>{try{return await(await fetch(Je+e,o)).json()}catch(s){console.error(s)}},fe=()=>{document.querySelectorAll(".fa-expand").forEach(o=>{o.addEventListener("click",s=>{const n=document.createElement("div");n.setAttribute("class","modal"),document.querySelector("main").append(n);const r=s.currentTarget.nextElementSibling.nextElementSibling.cloneNode(!0);n.append(r),n.addEventListener("click",()=>{document.querySelector(".modal").remove()})})})},t=(e,o)=>{const s=document.createElement(e);for(const n in o)s.setAttribute(n,o[n]);return s},_e=1e3,Y=_e*60,N=Y*60,Ye=N*24,f=e=>{const o=new Date(e),s=new Date;return o-s},tn=(e,o)=>{const s=Math.floor(f(e)%Ye/N);let n;return o.length>0?n=o[o.length-1].amount:n="0",s<0?'<span class="bg-auctionRed text-auctionGrey">SOLD</span>':"<span>"+s+" hours left</span><span>Bid:"+n+"$</span>"},nn=(e,o)=>{const s=Math.floor(f(e)%N/Y);let n;return o.length>0?n=o[o.length-1].amount:n="0",s<0?'<span class="bg-auctionRed text-auctionGrey">SOLD</span>':"<span>"+s+" min left</span><span>Bid:"+n+"$</span>"},sn=e=>{let o=[...e];for(let s=0;s<o.length;s++){let n=!1;for(let i=0;i<o.length;i++)if(o[i]>o[i+1]){let r=o[i];o[i]=o[i+1],o[i+1]=r,n=!0}if(!n)return o}return o},ce=e=>`
  <div
    class="relative aspect-square lg:aspect-square flex flex-col items-center mb-2 shrink justify-between bg-almostWhite overflow-auto hover:overflow-scrollborder-5">
    <i class="absolute fa-sharp fa-solid fa-expand top-5 right-5 text-black fa-lg" id="${e.id}"></i>
    <p class="absolute text-almostWhite p-1 bg-auctionBrown  left-0 bottom-20">${e.title}</p>
    <img
      src="${e.media[0]}"
      alt="" class="itemImage object-top  object-cover h-2/3 shrink min-w-full img${e.id}">
     <div class="flex text-auctionBlue min-w-full justify-around">
         <div class="flex flex-col m-0 p-0">
         ${tn(e.endsAt,e.bids)}
         </div>
       <button id=${e.id}" class="bg-auctionGrey p-1 mb-5 rounded-sm text-almostWhite font-bold item${e.id}">view item</button>
    </div>
  </div>
    `,on=document.querySelector("#home-link"),rn=document.querySelector("#filters"),C=document.querySelector("#searchFilters"),Ve=document.querySelector("#searchForm"),b=document.querySelector("#searchResults"),E=document.querySelector(".itemContainer"),ze=document.querySelector("#itemContainer1"),an=document.querySelector("#itemContainer2"),Ke=document.querySelector("#itemContainer3"),xe=document.querySelector("#registerContainer"),Z=document.querySelector("#userContainer");let G=document.querySelector("#listingsFeed");const h=document.querySelector("#listingHeader");document.querySelector("#filter-link-1");const j=document.querySelector("#nav-link-1"),V=document.querySelector("#nav-link-2"),cn=document.querySelector("main"),w=document.querySelector("#profileContainer");document.querySelector("#navWithBar");const k=document.querySelector("#expireSoonFeed"),M=document.querySelector("#newListingsFeed"),dn=document.querySelector("#divWithRegisterButton"),je=document.querySelector("#divWithLoginButton"),Qe=[w,xe,C,E,ze,an,Ke,Z,G,k,M],v=e=>{Qe.forEach(o=>{o.classList.add("hidden","sm:hidden","md:hidden","lg:hidden")}),e.classList.remove("hidden","sm:hidden","md:hidden","lg:hidden")},Xe=(e,o)=>{const s=document.querySelector(".counterBox"+e),n=t("div",{class:"time flex flex-col"}),i=t("div",{class:"time flex flex-col"}),r=t("div",{class:"time flex flex-col"}),a=t("h2",{class:"mx-auto text-auctionRed"}),d=t("h2",{class:"mx-auto text-auctionRed"}),c=t("h2",{class:"mx-auto text-auctionRed"}),u=t("small",{class:"mx-auto text-auctionRed"}),l=t("small",{class:"mx-auto text-auctionRed"}),x=t("small",{class:"mx-auto text-auctionRed"});return u.innerHTML="hours",l.innerHTML="minutes",x.innerHTML="seconds",n.append(a,u),i.append(d,l),r.append(c,x),s.append(n,i,r),setInterval(()=>{c.innerHTML=Math.floor(f(o)%Y/_e),d.innerHTML=Math.floor(f(o)%N/Y),a.innerHTML=Math.floor(f(o)%Ye/N)},1e3),s},ln=(e,o,s)=>{e.forEach((n,i)=>{const r=t("button",{class:"border bg-auctionBlue aspect-square flex h-7 mx-3 place-content-center items-center border-2 border-almostWhite drop-shadow-md font-bold"});r.innerHTML=i+1,s.append(r),r.addEventListener("click",d=>{document.querySelector(".bg-auctionBlue").classList.add("bg-slate-400"),document.querySelector(".bg-auctionBlue").classList.remove("bg-auctionBlue"),d.currentTarget.classList.remove("bg-slate-400"),d.currentTarget.classList.add("bg-auctionBlue"),document.querySelector(".currentImg").classList.add("hidden"),document.querySelector(".currentImg").classList.remove("currentImg"),document.getElementById(d.currentTarget.innerHTML).classList.remove("hidden"),document.getElementById(d.currentTarget.innerHTML).classList.add("currentImg")});const a=t("img",{class:" object-top  object-cover h-2/3 shrink w-4/5 mx-auto currentImg aspect-square drop-shadow-md hidden",id:i+1});i===0&&a.classList.remove("hidden"),a.src=n,o.append(a),i!==0&&r.classList.add("bg-slate-400")})},{entry:We}=L,un=(e,o)=>{const s=new FormData(e.currentTarget),n=Object.fromEntries(s.entries()),{amount:i}=n;We.body=JSON.stringify({amount:Number(i)}),console.log(n),console.log(o),g(`listings/${o}/bids`,We).then(d=>{console.log(d)});const a=T("credits")-Number(i);y("credits",a)},mn=(e,o,s,n,i,r,a)=>{e.addEventListener("click",d=>{const c=document.createElement("div");c.setAttribute("class","modal"),c.classList.add("bg-auctionGrey"),document.querySelector("main").append(c);const u=B;c.append(u),Ze.innerHTML=o,st.innerHTML="Your bid: "+s+"$",et.src=r,tt.innerHTML="<span class='underline underline-offset-2 '>current status</span>"+nn(n,i),nt.innerHTML="Your credits "+T("credits")+"$",ot.value=s,ve.addEventListener("click",()=>{document.querySelector(".modal").remove(),window.location.reload()}),document.getElementById("modalSubmit").addEventListener("submit",l=>{l.preventDefault(),l.stopImmediatePropagation(),un(l,a),de.classList.remove("bg-orange-300"),de.classList.add("bg-green-200"),setTimeout(()=>{window.location.reload()},1500)})})},B=t("form",{class:"bg-almostWhite w-4/5 md:w-1/2 h-2/3 mx-auto justify-around flex flex-col my-2 p-5 relative bg-auctionWhite",id:"modalSubmit"}),ve=t("i",{class:" text-auctionRed absolute p-4 aspect-square right-0 top-0 h-7"});ve.innerHTML="<i class='fa-solid fa-xmark fa-xl'></i>";const Ze=t("h2",{class:"text-logoBg font-bold w-full text-xl mx-auto my-2 p-1 flex place-content-center "}),et=t("img",{class:"object-top  object-cover h-2/3 shrink w-4/5 mx-auto currentImg aspect-square drop-shadow-md"}),tt=t("h4",{class:" py-3 mx-auto text-lg flex place-content-center flex-col text-logoBg font-bold"}),nt=t("h4",{class:"py-3 absolute left-0 top-1  text-logoBg font-bold"}),st=t("h3",{class:"w-full py-3 mx-auto text-lg flex place-content-center text-logoBg font-bold"}),ot=t("input",{id:"bidInput",name:"amount",type:"number",class:"bg-almostWhite border border-2 w-10 bg-white text-auctionGrey hidden",placeholder:"$"}),de=t("input",{type:"submit",value:"Confirm",class:"border text-lg font-bold border-radius-sm bg-orange-300 text-auctionBrown py-2 px-4"});B.append(Ze);B.append(ve);B.append(et);B.append(tt);B.append(nt);B.append(st);B.append(ot);B.append(de);t("input",{type:"submit",value:"Confirm",class:"border border-radius-sm bg-white text-auctionBlue px-2"});t("div",{class:"w-1/2 shrink flex justify-end p-2 gap-1"});const pn=t("label",{for:"bidInput",class:" text-auctionBrown text-base w-1/2 flex place-content-center items-center"});pn.textContent="Place a bid";const gn=(e,o,s,n,i,r,a,d)=>{e.addEventListener("keyup",c=>{c.stopImmediatePropagation();const u=c.currentTarget.value;u-1<o?(s.classList.remove("bg-white"),s.classList.add("bg-red-200"),s.setAttribute("disabled","disabled"),e.setAttribute("title","amount to low")):(s.classList.add("bg-white"),s.classList.remove("bg-red-200"),s.removeAttribute("disabled"),e.removeAttribute("title"),mn(s,n,u,i,r,a,d))})},it=e=>{e.addEventListener("click",()=>{window.location.reload()}),e.innerHTML="&#x2190; back"},z=()=>!(localStorage.getItem("auctionToken")===null||localStorage.getItem("auctionToken")==="undefined"),hn=(e,o,s)=>{s.length===0&&(o.remove(),e.remove()),s.forEach(n=>{o.insertAdjacentHTML("beforeend",`
        <div class="w-full text-auctionGrey flex">
        <p class="w-full text-auctionGrey text-center">${n.bidderName}</p>
        <p class="w-full text-auctionGrey text-center">${n.amount} $</p>
        </div>
        `)}),e.addEventListener("click",n=>{o.classList.toggle("hidden")})},bn=t("div",{class:"counterBox w-full grid grid-cols-3  my-5 p-0"}),rt=t("p",{class:"text-auctionGrey"}),le=t("p",{class:"text-auctionGrey"}),at=t("div",{class:"w-full bg-green-200 flex justify-around md:w-3/4 mx-auto my-2  flex-wrap "});at.append(rt,le);const Le=t("button",{class:"px-1 mx-auto text-auctionGrey rounded-sm text-sm bg-auctionYellow mx-auto"});Le.innerHTML="View all bids &darr;";const ct=t("div",{class:"text-auctionGrey w-full hidden bg-auctionYellow w-1/2 mx-auto",id:"bid-section"}),dt=t("input",{id:"bidInput",name:"amount",type:"number",class:"bg-almostWhite border border-2 w-10 bg-white text-auctionGrey",placeholder:"$"}),lt=t("input",{type:"button",value:"SUBMIT",class:"border border-radius-sm bg-white text-auctionBlue px-2"}),ye=t("div",{class:"w-1/2 shrink flex justify-end p-2 gap-1"}),we=t("label",{for:"bidInput",class:" text-auctionBrown text-base w-1/2 flex place-content-center items-center"});we.textContent="Place a bid";const ut=t("div",{class:"bg-auctionBlue w-full bg-opacity-50 md:w-3/4 mx-auto flex my-2 p-1"}),_=t("div",{class:""}),mt=t("h1",{class:"text-auctionBlue block text-xl mx-auto flex place-content-center"}),re=t("p",{class:"text-auctionBrown mx-auto"}),Te=t("div",{class:"flex place-content-center align-center my-5 flex-wrap"}),pt=t("small",{class:"text-auctionGrey w-full flex place-content-center"});pt.innerHTML="images";Te.append(pt);const gt=t("div",{class:"bg-white p-5 mx-auto flex flex-col   md:w-4/5 border border-auctionBrown rounded-lg drop-shadow-sm my-10"}),Be=t("div",{class:"mx-auto my-5 md:w-4/5 flex flex-wrap divide-x divide-slate-200"}),ht=t("h3",{class:"text-md text-auctionBlue w-full"});ht.innerHTML="Description";const bt=t("p",{class:"text-auctionGrey w-1/2 p-1"});Be.append(ht);const ft=t("p",{class:"text-auctionGrey w-1/2 p-1"});Be.append(bt,ft);ye.append(dt,lt);ut.append(we,ye);gt.append(mt,Te,_,bn,at,Le,ct,ut,Be);const He=t("div",{class:"w-full flex lg:w-2/4 md:w-3/4 self-center"}),xt=t("img",{class:"w-1/2 apect-square mx-auto border rounded-lg max-w-lg"}),vt=t("h2",{class:"w-1/2 mx-auto text-auctionGrey text-xl flex items-center place-content-center"});He.append(xt);He.append(vt);const ue=t("div",{class:"py-20"}),Lt=t("h2",{class:"text-lg text-auctionGrey"});ue.append(Lt);const fn=(e,o,s,n)=>{const i=t("button",{class:`w-full grid grid-cols-3 relative h-24 items-center border rounded border-auctionBrown my-2 place-content-center itemm${e}`}),r=t("img",{class:"h-12 w-12 aspect-square object-cover mx-auto"});r.src=o;const a=t("p",{class:"text-auctionGrey"});a.innerHTML=s;const d=t("p",{class:"text-auctionGrey"});return d.innerHTML=n,i.append(r,a,d),i},Ne=e=>f(e)<0?"<span class='bg-red-300 bg-opacity-30 p-2 text-auctionGrey'>FINISED</span>":"<span class='bg-auctionGreen bg-opacity-30 p-2 text-auctionGrey'>ACTIVE</span>",me=t("div",{class:"py-10"}),yt=t("h2",{class:"text-lg text-auctionGrey "});me.append(yt);const xn=(e,o,s)=>{const n=t("a",{class:"w-full grid grid-cols-3 relative h-20 items-center border rounded border-auctionBrown my-2 place-content-center"});n.href=e;const i=t("p",{class:"text-auctionGrey"});i.innerHTML=o;const r=t("p",{class:"text-auctionGrey"});return r.innerHTML=s,n.append(i,"-",r),n},vn=(e,o)=>{document.querySelector(".itemm"+e).addEventListener("click",()=>{wt(e,o),E.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),ze.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),Z.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),w.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),b.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),G.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),k.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),M.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),C.classList.add("hidden","sm:hidden","md:hidden","lg:hidden")})},{getWithJwt:Ce}=L,Ln=e=>{it(h);const o=`profiles/${e}?_listings=true `,s=`profiles/${e}/bids?_listings=true`;Z.append(He,ue,me),g(o,Ce).then(n=>{xt.src=n.avatar,vt.innerHTML=n.name,Lt.innerHTML=n.name+"'s listings",n.listings.forEach(i=>{ue.insertAdjacentElement("beforeend",fn(i.id,i.media[0],i.title,Ne(i.endsAt))),vn(i.id,Ke)})}),g(s,Ce).then(n=>{yt.innerHTML=n[0].bidderName+" made bid's on these listings",n.forEach(i=>{me.insertAdjacentElement("beforeend",xn(`../item?id=${i.listing.id}`,i.listing.title,Ne(i.listing.endsAt)))})})},yn=(e,o)=>{document.querySelector(".user"+e).addEventListener("click",()=>{Ln(o),E.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),Z.classList.remove("hidden","sm:hidden","md:hidden","lg:hidden"),w.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),b.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),G.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),k.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),M.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),C.classList.add("hidden","sm:hidden","md:hidden","lg:hidden")})},wt=(e,o)=>{h.innerHTML="",document.title="Item | AuctionHouse";const s=`listings/${e}?_seller=true&_bids=true`;it(h),o.append(re,gt),g(s).then(n=>{var d;n.media.length>0?ln(n.media,_,Te):(_.innerHTML="No images added to this listing",_.classList.add("text-auctionGrey"));const i=n.endsAt;mt.innerHTML=n.title,z()?re.innerHTML=`<button class="border border-black px-2 rounded-none user${n.seller.name}" id"../user/${n.seller.name}"><span class="text-auctionGrey">seller: </span class="font-bold text-lg">${n.seller.name}</button>`:re.innerHTML=`<button disabled="disabled">${n.seller.name} <span class="text-auctionGrey">(log in to visit ) </span></button>`,f(n.endsAt)>0&&Xe("",i),rt.innerHTML="Highest bid",n.bids.length>0?le.innerHTML=n.bids[n.bids.length-1].bidderName+": "+n.bids[n.bids.length-1].amount+"$":le.innerHTML=0+"$",bt.innerHTML=n.description,ft.innerHTML="tags: "+n.tags.toString(""),f(n.endsAt)<0&&(ye.innerHTML="Not possible to bid on this item");const a=((d=n.bids[n.bids.length-1])==null?void 0:d.amount)??0;z()?gn(dt,a,lt,n.title,n.endsAt,n.bids,n.media[0],n.id):we.innerHTML="log in to bid",hn(Le,ct,n.bids),yn(n.seller.name,n.seller.name)})},Me=e=>{document.querySelector(".item"+e).addEventListener("click",()=>{const s=E.cloneNode(!0);cn.append(s),Qe.push(s),wt(e,s),v(s)})},De=async e=>{await g("listings?_bids=true&sort=created&sortOrder=desc").then(o=>{const s=o.filter(n=>n.bids.length>0);for(let n=0;n<s.length;n++){const i=s[n];if(n===10)break;G.insertAdjacentHTML("beforeend",ce(i)),Me(i.id)}}),fe()},wn=()=>{j.textContent="Profile",V.addEventListener("click",()=>{localStorage.clear(),document.location.reload()}),V.textContent="Logout",document.title="Feed | AuctionHouse"},Tn=()=>{T("authed")===null?De():z()&&(De(),wn())},D=t("button",{class:"text-almostWhite bg-logoBg w-1/4 newest  rounded-none px-1 border-none mx-auto w-30 enabled:hover:outline-none",id:"filter-link-1"});D.innerHTML="Newest";const F=t("button",{class:"text-almostWhite expire bg-logoBg w-1/4  rounded-none px-1 border-none mx-auto w-30 enabled:hover:outline-none",id:"filter-link-2"});F.innerHTML="Expiring today";const Ee=t("nav",{class:""}),Tt=t("div",{class:"flex self-center"}),Bt=t("p",{class:"text-logoBg m-auto"});Bt.innerHTML="sort by";const O=t("div",{class:"flex flex-col md:flex-row md:pb-0 pb-0 gap-2"});Tt.append(Bt);O.append(F);O.append(D);Ee.append(Tt);Ee.append(O);const pe=t("button",{class:"px-5 border border-1 text-logoBg py-2 mx-auto block"});pe.innerHTML="Next";const q=t("button",{class:"border border-logoBg py-1 mx-2 w-20 enabled:hover:outline-none text-black"});q.innerHTML="titles";const $=t("button",{class:"border border-logoBg py-1 mx-2 w-20 enabled:hover:outline-none text-black"});$.innerHTML="users";const P=t("button",{class:"border border-logoBg py-1 mx-2 w-20 enabled:hover:outline-none text-black"});P.innerHTML="tags";const Ht=(e,o,s,n)=>{const i=t("button",{class:`w-full searchItem${e} grid grid-cols-3 relative h-24 items-center border rounded border-auctionBrown my-2 place-content-center`});i.href=e;const r=t("img",{class:"h-12 w-12 aspect-square object-cover mx-auto"});r.src=o;const a=t("p",{class:"text-auctionGrey"});a.innerHTML=s;const d=t("p",{class:"text-auctionGrey"});return d.innerHTML=n,i.append(r,a,d),i},Mt=e=>f(e)<0?"<span class='bg-red-300 bg-opacity-30 p-2 text-auctionGrey'>FINISED</span>":"<span class='bg-auctionGreen bg-opacity-30 p-2 text-auctionGrey'>ACTIVE</span>",Bn=(e,o,s)=>{const n=t("button",{class:`w-full grid grid-cols-2 nameIs${e} relative h-24 items-center border rounded border-auctionBrown my-2 place-content-center`}),i=t("img",{class:"h-12 w-12 aspect-square object-cover mx-auto"});i.src=o;const r=t("p",{class:"text-auctionGrey"});return r.innerHTML=s,n.append(i,r),n},Hn=()=>{Ve.addEventListener("input",()=>{listingsFeed.innerHTML="",b.innerHTML=`<div class="h-screen flex items-start place-content-center">
            <div class="relative w-24 h-24 animate-spin rounded-full bg-gradient-to-r from-auctionGreen via-logoBg to-auctionBlue ">
            <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-20 h-20 bg-gray-200 rounded-full border-2"></div>
            </div>
            </div>`,v(C),C.append(q,P,$),te.classList.remove("bg-auctionBlue"),ee.classList.remove("bg-auctionBlue"),b.classList.remove("hidden","sm:hidden","md:hidden","lg:hidden")})},Et=async(e,o)=>{let s=e;M.innerHTML="",h.innerHTML="Recently added items",await g("listings?_bids=true&sort=created&sortOrder=desc").then(i=>{const r=i.filter(a=>a.media[0]!==void 0);for(s;s<o;s++){const a=r[s];ce(a),M.insertAdjacentHTML("beforeend",ce(a)),Me(a.id)}}),fe(),M.insertAdjacentElement("afterend",pe);let n=0;pe.addEventListener("click",i=>{i.stopImmediatePropagation(),n++,Et(14*n,28*n)})},Mn=e=>`
    <div
    class="relative aspect-square lg:aspect-square flex flex-col items-center mb-2 shrink justify-between bg-almostWhite overflow-auto hover:overflow-scrollborder-5">
    <i class="absolute fa-sharp fa-solid fa-expand top-5 right-5 text-black fa-lg" id="${e.id}"></i>
    <p class="absolute text-almostWhite p-1 bg-auctionBrown  left-0 bottom-20">${e.title}</p>
    <img 
      src="${e.media[0]}"
      alt="" class="itemImage object-top  object-cover h-2/3 shrink min-w-full img${e.id}">
    <div class="flex text-auctionBlue min-w-full justify-around counterB">
    <div class="grid grid-cols-3  m-0 p-0 w-1/2 counterBox${e.id}">
    </div>
    <button id="${e.id}" class="bg-auctionGrey p-1 mb-5 rounded-sm text-almostWhite item${e.id}">view item</button>
    </div>
  </div>
    `,En=async(e,o)=>{let s=[],n=e;k.innerHTML="",h.innerHTML="Expires today",await g("listings?_bids=true&sort=created&sortOrder=desc").then(i=>{const r=i.filter(c=>f(c.endsAt)<864e5&&f(c.endsAt)>0),a=[];r.forEach(c=>{a.push(c.endsAt)});const d=sn(a);for(let c=0;c<d.length;c++){const u=d[c];for(let l=0;l<r.length;l++){let x=r[l];r[l].endsAt===u&&!s.includes(r[l])&&s.push(x)}}for(n=0;n<o;n++){const c=s[n];if(c===void 0)break;const u=c.endsAt,l=c.id;k.insertAdjacentHTML("beforeend",Mn(c)),Xe(l,u),Me(l)}}),fe()},St=(e,o=0)=>{let s;return function(...n){clearTimeout(s),s=setTimeout(()=>e.apply(this,n),o)}},Sn=e=>{q.addEventListener("click",o=>{o.currentTarget.classList.add("bg-auctionBlue"),P.classList.remove("bg-auctionBlue"),$.classList.remove("bg-auctionBlue"),b.innerHTML="",setTimeout(()=>{(b.innerHTML.includes("-translate-x-1/2")||b.innerHTML==="")&&(b.innerHTML="<p class='font-bold text-black mx-auto'>No results. <a href='/'>Go back</a></p>")},1500),e.forEach(s=>{b.insertAdjacentElement("beforeend",Ht(s.id,s.media[0],s.title,Mt(s.endsAt)))})}),q.click(),h.innerHTML="Search by title"},kn=e=>{P.addEventListener("click",o=>{h.innerHTML="Search by tags",o.currentTarget.classList.add("bg-auctionBlue"),q.classList.remove("bg-auctionBlue"),$.classList.remove("bg-auctionBlue"),b.innerHTML="",e.forEach(s=>{b.insertAdjacentElement("beforeend",Ht(s.id,s.media[0],s.title,Mt(s.endsAt)))})})},An=e=>{$.addEventListener("click",o=>{h.innerHTML="Search by user",o.currentTarget.classList.add("bg-auctionBlue"),q.classList.remove("bg-auctionBlue"),P.classList.remove("bg-auctionBlue"),b.innerHTML="",e.forEach(s=>{b.insertAdjacentElement("beforeend",Bn(s.name,s.avatar,s.name))})})},{getWithJwt:In}=L,qn=()=>{Ve.addEventListener("input",St(e=>{Gn(e)},1e3))},Gn=e=>{g("listings").then(o=>{const s=o.filter(i=>Boolean(i.tags.map(a=>a.toLowerCase()).filter(a=>a.includes(e.target.value)).length)),n=o.filter(i=>i.title.includes(e.target.value));Sn(n),kn(s)}),z()?g("profiles",In).then(o=>{const s=o.filter(n=>n.name.includes(e.target.value));An(s),console.log(o)}):$.remove()},R=(e,o,s,n,i,r)=>{const a=e.cloneNode(!0);a.addEventListener("click",()=>{i()}),e.remove(),o.insertAdjacentElement(s,a),a.classList.add(n),r&&(a.innerHTML=r)},ee=F.cloneNode(!0);ee.innerHTML="Expiring today";ee.id="newExB";const te=D.cloneNode(!0);te.innerHTML="Newest";te.id="newNewBtn";const $n=()=>{rn.insertAdjacentElement("beforeend",Ee),D.addEventListener("click",e=>{R(D,O,"beforeend","bg-auctionBlue",()=>{v(M),h.innerHTML="New Listings",document.querySelector(".expire").classList.remove("bg-auctionBlue")},"Newest"),v(M),Et(0,16),document.querySelector(".expire").classList.remove("bg-auctionBlue")}),F.addEventListener("click",e=>{R(F,O,"afterbegin","bg-auctionBlue",()=>{v(k),h.innerHTML="Expires today",document.querySelector(".newest").classList.remove("bg-auctionBlue")},"Expiring today"),v(k),En(0,14),document.querySelector(".newest").classList.remove("bg-auctionBlue")}),Hn(),qn()},jn=()=>{on.addEventListener("click",()=>{document.location.reload()})},kt=t("div",{class:"mx-auto w-full mt-15  md:mx-auto md:w-1/2"}),ne=t("form",{class:"mt-8 space-y-6 flex flex-col justify-center",method:"POST"}),At=ne.cloneNode(!0),se=t("div",{class:""}),Wn=t("input",{class:"bg-logoBg relative block w-full appearance-none border border-auctionBlue px-3 py-2 focus:outline-auctionBrown",type:"email",placeholder:"email",name:"email",pattern:"^[\\w\\-.]+@(stud.)?noroff.no$",title:"use a @stud.noroff.no mail-adress",required:"required"}),It=se.cloneNode(!0);se.append(Wn);const Nn=t("input",{class:"bg-logoBg relative block w-full appearance-none border border-auctionBlue px-3 py-2 focus:outline-auctionBrown",title:"uppercase, lowercase and (_) allowed",placeholder:"name",type:"text",name:"name",pattern:"[\\w]+$"}),Cn=se.cloneNode(!0);It.append(Nn);const Se=t("div",{class:""}),Dn=t("input",{class:"bg-logoBg relative block w-full appearance-none border border-auctionBlue px-3 py-2 focus:outline-auctionBrown",type:"password",placeholder:"password",name:"password",minlength:"8",required:"required"});Se.append(Dn);const Fn=Se.cloneNode(!0),ke=t("button",{type:"submit",class:"bg-auctionBlue text-almostWhite p-1  rounded-sm  mx-auto"});ke.innerHTML="Login";const qt=ke.cloneNode(!0);qt.innerHTML="Register";const oe=t("div",{class:"bg-auctionBlue rounded text-center hidden",id:"login-success-alert"}),Gt=oe.cloneNode(!0);Gt.innerHTML="Account successfully created";oe.innerHTML="Login successful";const K=t("div",{class:"bg-auctionRed rounded text-center hidden",id:"login-warning-alert"});ne.append(se,Se,ke,oe,K);const $t=t("div",{class:"flex flex-col items-center justify-between mt-3"}),jt=t("span",{class:"text-auctionGrey mx-auto"});jt.innerHTML="OR";const On=t("div",{class:"text-md mt-5 mx-auto"}),Ae=t("a",{class:"text-almostWhite bg-auctionGrey opacity-50 p-1 ml-1 rounded-sm hover:text-indigo-500",href:"./register"});Ae.innerHTML="Create an accocunt";On.append(Ae);$t.append(jt,Ae);kt.append(ne,$t);const Wt=t("div",{class:"mx-auto w-full mt-15  md:mx-auto md:w-1/2"}),Rn=K.cloneNode(!0);At.append(It,Cn,Fn,qt,Gt,Rn);Wt.append(At);const Pn=()=>{E.insertAdjacentElement("beforeend",kt)},{login:Un}=S,{registerLogin:Fe}=L,Jn=()=>{ne.addEventListener("submit",e=>{e.preventDefault();const o=new FormData(e.currentTarget),s=Object.fromEntries(o.entries()),{email:n}=s;Fe.body=JSON.stringify(s),g(Un,Fe).then(i=>{if(i.email===n){const{name:r,email:a,credits:d,avatar:c,accessToken:u}=i;console.log(i),oe.classList.remove("hidden"),y("auctionToken",u),y("name",r),y("credits",d),y("email",a),y("avatar",c),setTimeout(()=>{y("authed","true"),y("page","index"),window.location.reload()},2e3)}else i.statusCode===401&&(K.classList.remove("hidden"),K.textContent=i.errors[0].message)})})},{entry:Oe}=L,{listings:_n}=S,Yn=e=>{const o=new FormData(e.currentTarget),s=Object.fromEntries(o.entries()),{date:n,tags:i,title:r,description:a}=s,c=new Date(n).toJSON();let u=[],l=i.split(",");document.querySelectorAll("[name='media'").forEach(H=>{H.value.length>0&&u.push(H.value)}),Oe.body=JSON.stringify({title:r,description:a,tags:l,media:u,endsAt:c}),g(_n,Oe).then(H=>{console.log(H)})},m=t("form",{class:" hidden mt-8 bg-logoBg p-3 relative flex flex-col justify-center mx-auto md:w-2/3 w-full",id:"newItem",method:"post",required:"required"}),Nt=t("small",{class:"text-almostWhite mx-auto mt-2"});Nt.innerHTML="Title";const Vn=t("input",{class:"bg-almostWhite mt-2 rounded p-1 text-black py-1",type:"text",name:"title",id:"titleInput",placeholder:"Title",required:"required"}),Ct=t("small",{class:"text-almostWhite mx-auto mt-2"});Ct.innerHTML="tags";const zn=t("input",{class:"bg-almostWhite mt-2 rounded p-1 text-black py-1",type:"text",name:"tags",id:"tagsInput",placeholder:"tags"}),Dt=t("small",{class:"text-almostWhite mx-auto mt-2"});Dt.innerHTML="Description";const Kn=t("input",{class:"bg-almostWhite mt-2 rounded p-1 text-black py-1",type:"text",name:"description",id:"descriptionInput",placeholder:"description"}),Ft=t("small",{class:"text-almostWhite mx-auto mt-2"});Ft.innerHTML="Image URL's";const Qn=t("input",{class:"bg-almostWhite mt-2 rounded p-1 text-black py-1",type:"url",name:"media",id:"mediaInput",placeholder:"media URL"}),ge=t("input",{class:"hidden bg-almostWhite mt-2 rounded p-1 text-black py-1",type:"url",name:"media",id:"mediaInput1",placeholder:"media URL",disabled:"disabled"}),he=t("input",{class:"hidden bg-almostWhite mt-2 rounded p-1 text-black py-1",type:"url",name:"media",id:"mediaInput2",placeholder:"media URL",disabled:"disabled"}),be=t("input",{class:"hidden bg-almostWhite mt-2 rounded p-1 text-black py-1",type:"url",name:"media",id:"mediaInput3",placeholder:"media URL",disabled:"disabled"}),Xn=t("input",{class:"bg-almostWhite mt-2 rounded p-1 text-black py-1",type:"datetime-local",name:"date",id:"dateInput",placeholder:"ends at",required:"required"}),Zn=t("input",{class:"mt-2 rounded-none py-3 bg-auctionBlue",type:"submit",placeholder:"submit"}),Ie=t("button",{class:"text-sm p-0 m-0 border rounded-none mx-auto px-1 mt-1",type:"button"});Ie.innerHTML="Add photos &#8595";Ie.addEventListener("click",e=>{ge.classList.remove("hidden"),he.classList.remove("hidden"),be.classList.remove("hidden"),ge.removeAttribute("disabled"),he.removeAttribute("disabled"),be.removeAttribute("disabled"),e.currentTarget.classList.add("hidden")});m.append(Nt);m.append(Vn);m.append(Ct);m.append(zn);m.append(Dt);m.append(Kn);m.append(Ft);m.append(Qn);m.append(ge);m.append(he);m.append(be);m.append(Ie);m.append(Xn);m.append(Zn);const{deleteOpt:es}=L,{listings:ts}=S,ns=e=>{e.addEventListener("click",()=>{fetch(Je+ts+"/"+e.id,es),setTimeout(()=>{window.location.reload()},500)})},{update:Re}=L,{listings:ss}=S,os=(e,o)=>{const s=new FormData(e.currentTarget),n=Object.fromEntries(s.entries()),{tags:i,title:r,description:a}=n;let d=[],c=i.split(",");e.currentTarget.querySelectorAll("[name='media'").forEach(l=>{l.value.length>0&&d.push(l.value)}),Re.body=JSON.stringify({title:r,description:a,tags:c,media:d}),g(ss+"/"+o,Re).then(l=>{console.log(l)})},{listings:is}=S,{getWithJwt:rs}=L,as=e=>{e.addEventListener("click",o=>{o.stopImmediatePropagation();const s=t("i",{class:"fa-solid fa-xmark fa-xl text-almostWhite absolute p-4 aspect-square right-0 top-0 h-7 hover:bg-auctionGreen"});p.append(s),p.classList.remove("hidden"),I.classList.add("modal"),I.classList.remove("hidden");const n=p.dateInput;n.remove();const i=p.querySelector("button");i.remove();const r=p.tags,a=Array.from(p.media);p.querySelectorAll(".hidden").forEach(c=>{c.classList.remove("hidden")}),g(is+"/"+o.currentTarget.id,rs).then(c=>{p.title.value=c.title,p.description.value=c.description,c.media.forEach((l,x)=>{a[x].value=l}),r.value=c.tags.join(", ")}),s.addEventListener("click",()=>{s.remove(),p.append(n),p.append(i),p.classList.add("hidden"),I.classList.remove("modal"),I.classList.add("hidden")}),p.addEventListener("submit",c=>{c.preventDefault(),os(c,e.id),setTimeout(()=>{window.location.reload()},1e3)})})},{editAvatar:cs}=S,{update:Pe}=L,ds=e=>{e.addEventListener("click",o=>{o.stopImmediatePropagation(),A.classList.remove("hidden"),A.classList.add("modal");const s=t("i",{class:"fa-solid fa-xmark fa-xl text-almostWhite absolute p-4 aspect-square right-5 top-5 h-7 hover:bg-auctionGreen"});A.append(W,s);const n=W.media,i=W.avatar;s.addEventListener("click",()=>{A.classList.add("hidden"),A.classList.remove("modal")}),n.addEventListener("input",St(r=>{i.src=r.target.value},1e3)),W.addEventListener("submit",r=>{r.preventDefault(),Pe.body=JSON.stringify({avatar:n.value}),g(cs,Pe).then(a=>{console.log(a),en("avatar"),y("avatar",a.avatar),setTimeout(()=>{window.location.reload()},1e3)})})})},Ot=t("div",{class:"w-full  lg:w-2/4 sm:w-3/4 self-center flex flex-wrap"}),Rt=t("img",{class:"w-1/3 sm:w-1/2 apect-square mx-auto border rounded-lg max-w-lg"}),Pt=t("div",{class:"w-2/3 sm:w-1/2 text-auctionGrey sm:grid sm:grid-rows-4 p-2"}),Ut=t("h2",{class:" text-auctionGrey text-xl "}),qe=t("button",{class:"border bg-auctionGrey text-almostWhite h-8 m-0 text-sm w-1/2 self-end"});qe.innerHTML="Edit avatar";ds(qe);const Jt=t("p",{class:" text-auctionGrey"}),_t=t("p",{class:" text-auctionGrey"});Pt.append(Ut,Jt,_t,qe);const Yt=t("div",{class:"w-full   my-5"}),Ge=t("button",{class:" px-3 py-2 bg-auctionGreen rounded mx-auto border-none w-full"});Yt.append(Ge,m);Ge.innerHTML="Add listing";Ot.append(Rt,Pt,Yt);const Vt=t("div",{class:"py-20"}),zt=t("h2",{class:"text-lg text-auctionGrey "});zt.innerHTML="Your listings";const Kt=t("div",{class:"w-full flex justify-start"}),Q=t("button",{class:"rounded-xl bg-auctionBlue  mx-1 md:w-40 py-1 w-1/4"});Q.innerHTML="Acitve";const X=t("button",{class:"rounded-xl bg-logoBg mx-1 py-1 md:w-40 w-1/4  "});X.innerHTML="All";Kt.append(Q,X);Vt.append(zt,Kt);const ae=(e,o,s,n,i)=>{const r=t("div",{class:"w-full grid grid-rows-4 sm:grid-rows-1 sm:grid-cols-4 relative sm:h-40 border rounded border-auctionBrown border-1 my-2"}),a=t("img",{class:"h-20 w-20 aspect-square object-cover m-auto"});a.src=e;const d=t("div",{class:"flex flex-col justify-around"}),c=t("p",{class:"text-auctionGrey m-auto"});c.innerHTML=o;const u=t("p",{class:"text-auctionGrey m-auto"});u.innerHTML=s,d.append(c,u);const l=t("div",{class:"flex flex-col justify-around p-3"}),x=t("button",{class:"bg-auctionBlue text-auctionGrey w-1/2 mx-auto my-1",id:i});as(x),x.innerHTML="Update";const H=t("button",{class:"bg-auctionRed text-auctionGrey w-1/2 mx-auto my-1",id:i});H.innerHTML="Delete",ns(H),l.append(x,H);const $e=t("div",{class:"flex p-3"}),ie=t("a",{class:"text-auctionGrey m-auto bg-veryLightGrey h-1/2 w-full border rounded-lg items-center flex place-content-center"});return ie.href=n,ie.innerHTML="Visit",$e.append(ie),r.append(a,d,l,$e),r},Qt=e=>f(e)<0?"<span class='bg-red-300 bg-opacity-30 p-2 text-auctionGrey'>FINISED</span>":"<span class='bg-auctionGreen bg-opacity-30 p-2 text-auctionGrey'>ACTIVE</span>",ls=e=>!(f(e)<0),W=t("form",{id:"avatarForm",class:"w-2/3 h-2/3 rounded-sm bg-logoBg flex flex-col align-items-center relative"}),us=t("input",{class:" bg-almostWhite my-2 rounded p-1 text-black ",type:"url",name:"media",id:"avatarInput",placeholder:"avatar URL"}),Xt=t("button",{type:"submit",class:"bg-auctionBlue rounded-none w-40 mx-auto my-5"});Xt.innerHTML="Update";const Zt=t("img",{class:"w-1/2 rounded-lg m-2",name:"avatar"});Zt.src=T("avatar");W.append(Zt,us,Xt);const Ue=(e,o,s,n)=>{e.remove(),e.innerHTML="",o.append(e),s.forEach(i=>{e.insertAdjacentElement("beforeend",n(i.media[0],i.title,Qt(i.endsAt),`../item?id=${i.id}`,i.id))})},{account:ms}=S,{getWithJwt:ps}=L,J=t("div",{class:""}),I=t("div",{class:"w-full aspect-square hidden"}),p=m.cloneNode(!0),A=t("div",{class:"w-full aspect-square hidden"}),gs=async()=>{document.body.append(I,A),w.classList.add("min-h-screen"),document.title="Profile | AuctionHouse",h.innerHTML="Your details",p.id="updateForm",I.append(p),w.append(Ot,Vt,J);const e=[],o=[];await g(ms,ps).then(s=>{console.log(s),Rt.src=s.avatar,Ut.innerHTML=s.name,Jt.innerHTML=s.email,_t.innerHTML="Your wallet "+s.credits+"$",s.listings.forEach(n=>{J.insertAdjacentElement("beforeend",ae(n.media[0],n.title,Qt(n.endsAt),`../item?id=${n.id}`,n.id)),ls(n.endsAt)&&e.push(n),o.push(n)})}),Q.append("("+e.length+")"),X.append("("+o.length+")"),Q.addEventListener("click",()=>{Ue(J,w,e,ae)}),X.addEventListener("click",()=>{Ue(J,w,o,ae)}),Ge.addEventListener("click",s=>{m.classList.toggle("hidden")}),m.addEventListener("submit",s=>{s.preventDefault(),Yn(s),setTimeout(()=>{document.location.reload()},500)})},hs=()=>{G.innerHTML="",E.innerHTML="",gs()},bs=()=>{T("authed")==="false"||T("authed")===null?j.addEventListener("click",()=>{R(j,je,"afterbegin","newButton",()=>{v(E),h.innerHTML="Login"}),v(E),h.innerHTML="LOGIN",Pn(),Jn()}):j.addEventListener("click",()=>{R(j,je,"beforeend","profileButton",()=>{te.classList.remove("bg-auctionBlue"),ee.classList.remove("bg-auctionBlue"),v(w)},"Profile"),v(w),hs()})},fs=()=>{xe.insertAdjacentElement("beforeend",Wt)},xs=()=>{V.addEventListener("click",()=>{R(V,dn,"beforeend","newButton",()=>{v(xe),h.innerHTML="Create Account"},"Create Account"),G.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),h.innerHTML="Create Account",fs()})},vs=()=>{jn(),bs(),xs()};vs();$n();Tn();
