(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerpolicy&&(r.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?r.credentials="include":i.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=s(i);fetch(i.href,r)}})();const y=t=>{try{return JSON.parse(localStorage.getItem(t))}catch{return null}},_e=t=>localStorage.removeItem(t),f=(t,o)=>{localStorage.setItem(t,JSON.stringify(o))},S={base:"https://api.noroff.dev/api/v1/auction/",register:"auth/register",login:"auth/login",account:"profiles/"+y("name")+"?_listings=true",listings:"listings",profiles:"profiles",editAvatar:"profiles/"+y("name")+"/media"},{base:Ye}=S,P={"Content-Type":"application/json",Authorization:`Bearer ${y("auctionToken")}`},w={registerLogin:{method:"POST",headers:{"Content-Type":"application/json"},body:{}},getWithJwt:{method:"GET",headers:P},entry:{method:"POST",headers:P,body:{}},update:{method:"PUT",headers:P,body:{}},deleteOpt:{method:"DELETE",headers:P},react:{method:"PUT",headers:{Authorization:`Bearer ${localStorage.getItem("socialToken")}`}}},g=async(t,o)=>{try{return await(await fetch(Ye+t,o)).json()}catch(s){console.error(s)}},xe=()=>{document.querySelectorAll(".fa-expand").forEach(o=>{o.addEventListener("click",s=>{const n=document.createElement("div");n.setAttribute("class","modal"),document.querySelector("main").append(n);const r=s.currentTarget.nextElementSibling.nextElementSibling.cloneNode(!0);n.append(r),n.addEventListener("click",()=>{document.querySelector(".modal").remove()})})})},e=(t,o)=>{const s=document.createElement(t);for(const n in o)s.setAttribute(n,o[n]);return s},Ve=1e3,J=Ve*60,$=J*60,ze=$*24,h=t=>{const o=new Date(t),s=new Date;return o-s},sn=(t,o)=>{const s=Math.floor(h(t)%ze/$);let n;return o.length>0?n=o[o.length-1].amount:n="0",s<0?'<span class="bg-auctionRed text-auctionGrey">SOLD</span>':"<span>"+s+" hours left</span><span>Bid:"+n+"$</span>"},on=(t,o)=>{const s=Math.floor(h(t)%$/J);let n;return o.length>0?n=o[o.length-1].amount:n="0",s<0?'<span class="bg-auctionRed text-auctionGrey">SOLD</span>':"<span>"+s+" min left</span><span>Bid:"+n+"$</span>"},rn=t=>{let o=[...t];for(let s=0;s<o.length;s++){let n=!1;for(let i=0;i<o.length;i++)if(o[i]>o[i+1]){let r=o[i];o[i]=o[i+1],o[i+1]=r,n=!0}if(!n)return o}return o},ae=t=>`
  <div
    class="relative aspect-square lg:aspect-square flex flex-col items-center mb-2 shrink justify-between bg-almostWhite overflow-auto hover:overflow-scrollborder-5">
    <i class="absolute fa-sharp fa-solid fa-expand top-5 right-5 text-black fa-lg" id="${t.id}"></i>
    <p class="absolute text-almostWhite p-1 bg-auctionBrown  left-0 bottom-20">${t.title}</p>
    <img
      src="${t.media[0]}"
      alt="" class="itemImage object-top  object-cover h-2/3 shrink min-w-full img${t.id}">
     <div class="flex text-auctionBlue min-w-full justify-around">
         <div class="flex flex-col m-0 p-0">
         ${sn(t.endsAt,t.bids)}
         </div>
       <a href="item?id=${t.id}" class="bg-auctionGrey hover:border border-almostWhite p-1 mb-5 rounded-sm text-almostWhite font-bold item${t.id}">view item</a>
    </div>
  </div>
    `,an=document.querySelector("#home-link"),cn=document.querySelector("#filters"),ce=document.querySelector("#searchFilters"),Ke=document.querySelector("#searchForm"),x=document.querySelector("#searchResults"),Qe=document.querySelector(".itemContainer"),Xe=document.querySelector("#itemContainer1"),ln=document.querySelector("#itemContainer3"),ve=document.querySelector("#registerContainer"),_=document.querySelector("#loginContainer"),Ze=document.querySelector("#userContainer");let F=document.querySelector("#listingsFeed");const b=document.querySelector("#listingHeader");document.querySelector("#filter-link-1");const I=document.querySelector("#nav-link-1"),Y=document.querySelector("#nav-link-2");document.querySelector("main");const H=document.querySelector("#profileContainer"),dn=document.querySelector("#navWithBar"),j=document.querySelector("#expireSoonFeed"),k=document.querySelector("#newListingsFeed"),un=document.querySelector("#divWithRegisterButton"),je=document.querySelector("#divWithLoginButton"),mn=document.querySelector("#bar"),oe=document.querySelector("#zoomglass"),We=document.querySelector("#navWithSearch"),ie=document.querySelector("#stopSearch"),pn=[x,_,H,ve,ce,Qe,Xe,ln,Ze,F,j,k],v=t=>{pn.forEach(o=>{o.classList.add("hidden","sm:hidden","md:hidden","lg:hidden")}),t.classList.remove("hidden","sm:hidden","md:hidden","lg:hidden")},Ce=async t=>{await g("listings?_bids=true&sort=created&sortOrder=desc").then(o=>{const s=o.filter(n=>n.bids.length>0);for(let n=0;n<s.length;n++){const i=s[n];if(n===10)break;F.insertAdjacentHTML("beforeend",ae(i))}}),xe()},V=()=>!(localStorage.getItem("auctionToken")===null||localStorage.getItem("auctionToken")==="undefined"),et=()=>{I.textContent="Profile",Y.addEventListener("click",()=>{localStorage.clear(),document.location.reload()}),Y.textContent="Logout",document.title="Feed | AuctionHouse"},tt=(t,o)=>{const s=document.querySelector(".counterBox"+t),n=e("div",{class:"time flex flex-col"}),i=e("div",{class:"time flex flex-col"}),r=e("div",{class:"time flex flex-col"}),a=e("h2",{class:"mx-auto text-auctionRed"}),l=e("h2",{class:"mx-auto text-auctionRed"}),c=e("h2",{class:"mx-auto text-auctionRed"}),u=e("small",{class:"mx-auto text-auctionRed"}),d=e("small",{class:"mx-auto text-auctionRed"}),L=e("small",{class:"mx-auto text-auctionRed"});return u.innerHTML="hours",d.innerHTML="minutes",L.innerHTML="seconds",n.append(a,u),i.append(l,d),r.append(c,L),s.append(n,i,r),setInterval(()=>{c.innerHTML=Math.floor(h(o)%J/Ve),l.innerHTML=Math.floor(h(o)%$/J),a.innerHTML=Math.floor(h(o)%ze/$)},1e3),s},gn=(t,o,s)=>{t.forEach((n,i)=>{const r=e("button",{class:"border bg-auctionBlue aspect-square flex h-7 mx-3 place-content-center items-center border-2 border-almostWhite drop-shadow-md font-bold"});r.innerHTML=i+1,s.append(r),r.addEventListener("click",l=>{document.querySelector(".bg-auctionBlue").classList.add("bg-slate-400"),document.querySelector(".bg-auctionBlue").classList.remove("bg-auctionBlue"),l.currentTarget.classList.remove("bg-slate-400"),l.currentTarget.classList.add("bg-auctionBlue"),document.querySelector(".currentImg").classList.add("hidden"),document.querySelector(".currentImg").classList.remove("currentImg"),document.getElementById(l.currentTarget.innerHTML).classList.remove("hidden"),document.getElementById(l.currentTarget.innerHTML).classList.add("currentImg")});const a=e("img",{class:" object-top  object-cover h-2/3 shrink w-4/5 mx-auto currentImg aspect-square drop-shadow-md hidden",id:i+1});i===0&&a.classList.remove("hidden"),a.src=n,o.append(a),i!==0&&r.classList.add("bg-slate-400")})},{entry:Ne}=w,bn=(t,o)=>{const s=new FormData(t.currentTarget),n=Object.fromEntries(s.entries()),{amount:i}=n;Ne.body=JSON.stringify({amount:Number(i)}),console.log(n),console.log(o),g(`listings/${o}/bids`,Ne).then(l=>{console.log(l)});const a=y("credits")-Number(i);f("credits",a)},fn=(t,o,s,n,i,r,a)=>{t.addEventListener("click",l=>{const c=document.createElement("div");c.setAttribute("class","modal"),c.classList.add("bg-auctionGrey"),document.querySelector("main").append(c);const u=T;c.append(u),nt.innerHTML=o,rt.innerHTML="Your bid: "+s+"$",st.src=r,ot.innerHTML="<span class='underline underline-offset-2 '>current status</span>"+on(n,i),it.innerHTML="Wallet "+y("credits")+"$",at.value=s,Le.addEventListener("click",()=>{document.querySelector(".modal").remove(),window.location.reload()}),document.getElementById("modalSubmit").addEventListener("submit",d=>{d.preventDefault(),d.stopImmediatePropagation(),bn(d,a),le.classList.remove("bg-orange-300"),le.classList.add("bg-green-200"),setTimeout(()=>{window.location.reload()},1500)})})},T=e("form",{class:"bg-almostWhite w-4/5 md:w-1/2 h-2/3 mx-auto justify-around flex flex-col my-2 p-5 relative bg-auctionWhite",id:"modalSubmit"}),Le=e("i",{class:" text-auctionRed absolute p-4 aspect-square right-0 top-0 h-7"});Le.innerHTML="<i class='fa-solid fa-xmark fa-xl'></i>";const nt=e("h2",{class:"text-logoBg font-bold w-full text-xl mx-auto my-2 p-1 flex place-content-center "}),st=e("img",{class:"object-top  object-cover h-2/3 shrink w-4/5 mx-auto currentImg aspect-square drop-shadow-md"}),ot=e("h4",{class:" py-3 mx-auto text-lg flex place-content-center flex-col text-logoBg font-bold"}),it=e("h4",{class:"py-3 absolute left-0 top-0  text-black  text-lg"}),rt=e("h3",{class:"w-full py-3 mx-auto text-lg flex place-content-center text-logoBg font-bold"}),at=e("input",{id:"bidInput",name:"amount",type:"number",class:"bg-almostWhite border border-2 w-10 bg-white text-auctionGrey hidden",placeholder:"$"}),le=e("input",{type:"submit",value:"Confirm",class:"border text-lg font-bold border-radius-sm bg-auctionGreen text-auctionBrown py-1 px-2 mb-2"});T.append(nt);T.append(Le);T.append(st);T.append(ot);T.append(it);T.append(rt);T.append(at);T.append(le);e("input",{type:"submit",value:"Confirm",class:"border border-radius-sm bg-white text-auctionBlue px-2"});e("div",{class:"w-1/2 shrink flex justify-end p-2 gap-1"});const hn=e("label",{for:"bidInput",class:" text-auctionBrown text-base w-1/2 flex place-content-center items-center"});hn.textContent="Place a bid";const xn=(t,o,s,n,i,r,a,l)=>{t.addEventListener("keyup",c=>{c.stopImmediatePropagation();const u=c.currentTarget.value;u-1<o?(s.classList.remove("bg-white"),s.classList.add("bg-red-200"),s.setAttribute("disabled","disabled"),t.setAttribute("title","amount to low")):(s.classList.add("bg-white"),s.classList.remove("bg-red-200"),s.removeAttribute("disabled"),t.removeAttribute("title"),fn(s,n,u,i,r,a,l))})},ct=t=>{t.addEventListener("click",()=>{window.location.reload()}),t.innerHTML="&#x2190; back"},vn=(t,o,s)=>{s.length===0&&(o.remove(),t.remove()),s.forEach(n=>{o.insertAdjacentHTML("beforeend",`
        <div class="w-full text-auctionGrey flex">
        <p class="w-full text-auctionGrey text-center">${n.bidderName}</p>
        <p class="w-full text-auctionGrey text-center">${n.amount} $</p>
        </div>
        `)}),t.addEventListener("click",n=>{o.classList.toggle("hidden")})},Ln=t=>{let o=[];t.forEach(s=>{o.push(s.amount)});for(let s=0;s<o.length;s++){let n=!1;for(let i=0;i<o.length;i++)if(o[i]>o[i+1]){let r=o[i];o[i]=o[i+1],o[i+1]=r,n=!0}if(!n)return o[o.length-1]}return o[o.length-1]},yn=e("div",{class:"counterBox w-full grid grid-cols-3  my-5 p-0"}),lt=e("p",{class:"text-auctionGrey"}),de=e("p",{class:"text-auctionGrey"}),dt=e("div",{class:"w-full bg-green-200 flex justify-around md:w-3/4 mx-auto my-2  flex-wrap "});dt.append(lt,de);const ye=e("button",{class:"px-1 mx-auto text-auctionGrey rounded-sm text-sm bg-auctionYellow mx-auto"});ye.innerHTML="View all bids &darr;";const ut=e("div",{class:"text-auctionGrey w-full hidden bg-auctionYellow w-1/2 mx-auto",id:"bid-section"}),mt=e("input",{id:"bidInput",name:"amount",type:"number",class:"bg-almostWhite border border-2 w-10 bg-white text-auctionGrey",placeholder:"$"}),pt=e("input",{type:"button",value:"SUBMIT",class:"border border-radius-sm bg-white text-auctionBlue px-2"}),we=e("div",{class:"w-1/2 shrink flex justify-end p-2 gap-1"}),Te=e("label",{for:"bidInput",class:" text-auctionBrown text-base w-1/2 flex place-content-center items-center"});Te.textContent="Place a bid";const gt=e("div",{class:"bg-auctionBlue w-full bg-opacity-50 md:w-3/4 mx-auto flex my-2 p-1"}),U=e("div",{class:""}),bt=e("h1",{class:"text-auctionBlue block text-xl mx-auto flex place-content-center"}),ue=e("p",{class:"text-auctionBrown mx-auto"}),Be=e("div",{class:"flex place-content-center align-center my-5 flex-wrap"}),ft=e("small",{class:"text-auctionGrey w-full flex place-content-center"});ft.innerHTML="images";Be.append(ft);const ht=e("div",{class:"bg-white p-5 mx-auto flex flex-col   md:w-4/5 border border-auctionBrown rounded-lg drop-shadow-sm my-10"}),He=e("div",{class:"mx-auto my-5 md:w-4/5 flex flex-wrap divide-x divide-slate-200"}),xt=e("h3",{class:"text-md text-auctionBlue w-full"});xt.innerHTML="Description";const vt=e("p",{class:"text-auctionGrey w-1/2 p-1"});He.append(xt);const Lt=e("p",{class:"text-auctionGrey w-1/2 p-1"});He.append(vt,Lt);we.append(mt,pt);gt.append(Te,we);ht.append(bt,Be,U,yn,dt,ye,ut,gt,He);const yt=e("a",{class:"flex flex-col w-full m-auto p-3"});yt.append(ue,ht);const wn=()=>{const t=document.location.search,o=new URLSearchParams(t).get("id");document.querySelector("#itemContainer"),b.innerHTML="",document.title="Item | AuctionHouse";const s=`listings/${o}?_seller=true&_bids=true`;ct(b),Xe.append(yt),g(s).then(n=>{n.media.length>0?gn(n.media,U,Be):(U.innerHTML="No images added to this listing",U.classList.add("text-auctionGrey"));const i=n.endsAt;bt.innerHTML=n.title;const r=Ln(n.bids);V()?ue.innerHTML=`<a class="border border-black px-2 rounded-none" href="?user=${n.seller.name}"><span class="text-auctionGrey">seller: </span class="font-bold text-lg">${n.seller.name}</a>`:ue.innerHTML=`<button disabled="disabled">${n.seller.name} <span class="text-auctionGrey">(log in to visit ) </span></button>`,h(n.endsAt)>0&&tt("",i),lt.innerHTML="Highest bid",n.bids.length>0?de.innerHTML=n.bids[n.bids.length-1].bidderName+": "+r+"$":de.innerHTML=0+"$",console.log(n.bids),vt.innerHTML=n.description,Lt.innerHTML="tags: "+n.tags.toString(""),h(n.endsAt)<0&&(we.innerHTML="Not possible to bid on this item"),V()?xn(mt,r,pt,n.title,n.endsAt,n.bids,n.media[0],n.id):Te.innerHTML="log in to bid",vn(ye,ut,n.bids),console.log(n)})},Se=e("div",{class:"w-full flex lg:w-2/4 md:w-3/4 self-center"}),wt=e("img",{class:"w-1/2 apect-square mx-auto border rounded-lg max-w-lg"}),Tt=e("h2",{class:"w-1/2 mx-auto text-auctionGrey text-xl flex items-center place-content-center"});Se.append(wt);Se.append(Tt);const me=e("div",{class:"py-20"}),Bt=e("h2",{class:"text-lg text-auctionGrey"});me.append(Bt);const Tn=(t,o,s,n)=>{const i=e("a",{class:"w-full grid grid-cols-3 relative h-24 items-center border rounded border-auctionBrown my-2 place-content-center",href:`item?id=${t}`}),r=e("img",{class:"h-12 w-12 aspect-square object-cover mx-auto"});r.src=o;const a=e("p",{class:"text-auctionGrey"});a.innerHTML=s;const l=e("p",{class:"text-auctionGrey"});return l.innerHTML=n,i.append(r,a,l),i},De=t=>h(t)<0?"<span class='bg-red-300 bg-opacity-30 p-2 text-auctionGrey'>FINISED</span>":"<span class='bg-auctionGreen bg-opacity-30 p-2 text-auctionGrey'>ACTIVE</span>",pe=e("div",{class:"py-10"}),Ht=e("h2",{class:"text-lg text-auctionGrey "});pe.append(Ht);const Bn=(t,o,s)=>{const n=e("a",{class:"w-full grid grid-cols-3 relative h-20 items-center border rounded border-auctionBrown my-2 place-content-center"});n.href=t;const i=e("p",{class:"text-auctionGrey"});i.innerHTML=o;const r=e("p",{class:"text-auctionGrey"});return r.innerHTML=s,n.append(i,"-",r),n},{getWithJwt:Fe}=w,Hn=t=>{ct(b);const o=document.location.search,s=new URLSearchParams(o).get("user"),n=`profiles/${s}?_listings=true `,i=`profiles/${s}/bids?_listings=true`;Ze.append(Se,me,pe),g(n,Fe).then(r=>{wt.src=r.avatar,Tt.innerHTML=r.name,Bt.innerHTML=r.name+"'s listings",r.listings.forEach(a=>{me.insertAdjacentElement("beforeend",Tn(a.id,a.media[0],a.title,De(a.endsAt)))})}),g(i,Fe).then(r=>{Ht.innerHTML=r[0].bidderName+" made bid's on these listings",r.forEach(a=>{pe.insertAdjacentElement("beforeend",Bn(`item?id=${a.listing.id}`,a.listing.title,De(a.listing.endsAt)))})})},Sn=()=>{y("updatedProfile")==="true"?(document.querySelector("#nav-link-1").click(),v(H),_e("updatedProfile")):document.location.href.includes("id")?wn():document.location.href.includes("user")?Hn():y("authed")===null?Ce():y("authed")==="true"&&(Ce(),et())},W=e("button",{class:"text-almostWhite bg-logoBg w-1/4 newest  rounded-none px-1 border-none mx-auto w-30 enabled:hover:outline-none",id:"filter-link-1"});W.innerHTML="Newest";const C=e("button",{class:"text-almostWhite expire bg-logoBg w-1/4  rounded-none px-1 border-none mx-auto w-30 enabled:hover:outline-none",id:"filter-link-2"});C.innerHTML="Expiring today";const Me=e("nav",{class:""}),St=e("div",{class:"flex self-center"}),Mt=e("p",{class:"text-logoBg m-auto"});Mt.innerHTML="sort by";const N=e("div",{class:"flex flex-col md:flex-row md:pb-0 pb-0 gap-2"});St.append(Mt);N.append(C);N.append(W);Me.append(St);Me.append(N);const ge=e("button",{class:"px-5 border border-1 text-logoBg py-2 mx-auto block"});ge.innerHTML="Next";const A=e("button",{class:"border border-logoBg py-1 mx-2 w-20 enabled:hover:outline-none text-black"});A.innerHTML="titles";const q=e("button",{class:"border border-logoBg py-1 mx-2 w-20 enabled:hover:outline-none text-black"});q.innerHTML="users";const O=e("button",{class:"border border-logoBg py-1 mx-2 w-20 enabled:hover:outline-none text-black"});O.innerHTML="tags";const Et=(t,o,s,n)=>{const i=e("button",{class:`w-full searchItem${t} grid grid-cols-3 relative h-24 items-center border rounded border-auctionBrown my-2 place-content-center`});i.href=t;const r=e("img",{class:"h-12 w-12 aspect-square object-cover mx-auto"});r.src=o;const a=e("p",{class:"text-auctionGrey"});a.innerHTML=s;const l=e("p",{class:"text-auctionGrey"});return l.innerHTML=n,i.append(r,a,l),i},kt=t=>h(t)<0?"<span class='bg-red-300 bg-opacity-30 p-2 text-auctionGrey'>FINISED</span>":"<span class='bg-auctionGreen bg-opacity-30 p-2 text-auctionGrey'>ACTIVE</span>",Mn=(t,o,s)=>{const n=e("button",{class:`w-full grid grid-cols-2 nameIs${t} relative h-24 items-center border rounded border-auctionBrown my-2 place-content-center`}),i=e("img",{class:"h-12 w-12 aspect-square object-cover mx-auto"});i.src=o;const r=e("p",{class:"text-auctionGrey"});return r.innerHTML=s,n.append(i,r),n},En=()=>{Ke.addEventListener("input",()=>{x.innerHTML=`<div class="h-screen flex items-start place-content-center">
            <div class="relative w-24 h-24 animate-spin rounded-full bg-gradient-to-r from-auctionGreen via-logoBg to-auctionBlue ">
            <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-20 h-20 bg-gray-200 rounded-full border-2"></div>
            </div>
            </div>`,v(ce),ce.append(A,O,q),Z.classList.remove("bg-auctionBlue"),X.classList.remove("bg-auctionBlue"),x.classList.remove("hidden","sm:hidden","md:hidden","lg:hidden")})},At=async(t,o)=>{let s=t;k.innerHTML="",b.innerHTML="Recently added items",await g("listings?_bids=true&sort=created&sortOrder=desc").then(i=>{const r=i.filter(a=>a.media[0]!==void 0);for(s;s<o;s++){const a=r[s];ae(a),k.insertAdjacentHTML("beforeend",ae(a))}}),xe(),k.insertAdjacentElement("afterend",ge);let n=0;ge.addEventListener("click",i=>{i.stopImmediatePropagation(),n++,At(14*n,28*n)})},kn=t=>`
    <div
    class="relative aspect-square lg:aspect-square flex flex-col items-center mb-2 shrink justify-between bg-almostWhite overflow-auto hover:overflow-scrollborder-5">
    <i class="absolute fa-sharp fa-solid fa-expand top-5 right-5 text-black fa-lg" id="${t.id}"></i>
    <p class="absolute text-almostWhite p-1 bg-auctionBrown  left-0 bottom-20">${t.title}</p>
    <img 
      src="${t.media[0]}"
      alt="" class="itemImage object-top  object-cover h-2/3 shrink min-w-full img${t.id}">
    <div class="flex text-auctionBlue min-w-full justify-around counterB">
    <div class="grid grid-cols-3  m-0 p-0 w-1/2 counterBox${t.id}">
    </div>
    <a href="item?id=${t.id}" class="bg-auctionGrey p-1 mb-5 rounded-sm text-almostWhite item${t.id}">view item</a>
    </div>
  </div>
    `,An=async(t,o)=>{let s=[],n=t;j.innerHTML="",b.innerHTML="Expires today",await g("listings?_bids=true&sort=created&sortOrder=desc").then(i=>{const r=i.filter(c=>h(c.endsAt)<864e5&&h(c.endsAt)>0),a=[];r.forEach(c=>{a.push(c.endsAt)});const l=rn(a);for(let c=0;c<l.length;c++){const u=l[c];for(let d=0;d<r.length;d++){let L=r[d];r[d].endsAt===u&&!s.includes(r[d])&&s.push(L)}}for(n=0;n<o;n++){const c=s[n];if(c===void 0)break;const u=c.endsAt,d=c.id;j.insertAdjacentHTML("beforeend",kn(c)),tt(d,u)}}),xe()},qt=(t,o=0)=>{let s;return function(...n){clearTimeout(s),s=setTimeout(()=>t.apply(this,n),o)}},qn=t=>{A.addEventListener("click",o=>{o.currentTarget.classList.add("bg-auctionBlue"),O.classList.remove("bg-auctionBlue"),q.classList.remove("bg-auctionBlue"),x.innerHTML="",setTimeout(()=>{(x.innerHTML.includes("-translate-x-1/2")||x.innerHTML==="")&&(x.innerHTML="<p class='font-bold text-black mx-auto'>No results. <a href='/'>Go back</a></p>")},1500),t.forEach(s=>{x.insertAdjacentElement("beforeend",Et(s.id,s.media[0],s.title,kt(s.endsAt)))})}),A.click(),b.innerHTML="Search by title"},In=t=>{O.addEventListener("click",o=>{b.innerHTML="Search by tags",o.currentTarget.classList.add("bg-auctionBlue"),A.classList.remove("bg-auctionBlue"),q.classList.remove("bg-auctionBlue"),x.innerHTML="",t.forEach(s=>{x.insertAdjacentElement("beforeend",Et(s.id,s.media[0],s.title,kt(s.endsAt)))})})},Gn=t=>{q.addEventListener("click",o=>{b.innerHTML="Search by user",o.currentTarget.classList.add("bg-auctionBlue"),A.classList.remove("bg-auctionBlue"),O.classList.remove("bg-auctionBlue"),x.innerHTML="",t.forEach(s=>{x.insertAdjacentElement("beforeend",Mn(s.name,s.avatar,s.name))})})},{getWithJwt:$n}=w,jn=()=>{Ke.addEventListener("input",qt(t=>{Wn(t)},1e3))},Wn=t=>{g("listings").then(o=>{const s=o.filter(i=>Boolean(i.tags.map(a=>a.toLowerCase()).filter(a=>a.includes(t.target.value)).length)),n=o.filter(i=>i.title.includes(t.target.value));qn(n),In(s)}),V()?g("profiles",$n).then(o=>{const s=o.filter(n=>n.name.includes(t.target.value));Gn(s),console.log(o)}):q.remove()},D=(t,o,s,n,i,r)=>{const a=t.cloneNode(!0);a.addEventListener("click",()=>{i()}),t.remove(),o.insertAdjacentElement(s,a),a.classList.add(n),r&&(a.innerHTML=r)},X=C.cloneNode(!0);X.innerHTML="Expiring today";X.id="newExB";const Z=W.cloneNode(!0);Z.innerHTML="Newest";Z.id="newNewBtn";const Cn=()=>{cn.insertAdjacentElement("beforeend",Me),W.addEventListener("click",t=>{D(W,N,"beforeend","bg-auctionBlue",()=>{v(k),b.innerHTML="New Listings",document.querySelector(".expire").classList.remove("bg-auctionBlue")},"Newest"),v(k),At(0,16),document.querySelector(".expire").classList.remove("bg-auctionBlue")}),C.addEventListener("click",t=>{D(C,N,"afterbegin","bg-auctionBlue",()=>{v(j),b.innerHTML="Expires today",document.querySelector(".newest").classList.remove("bg-auctionBlue")},"Expiring today"),v(j),An(0,14),document.querySelector(".newest").classList.remove("bg-auctionBlue")}),En(),jn()},Nn=()=>{an.addEventListener("click",()=>{document.location.replace("/semesterproject-2-olemartin/")})},It=e("div",{class:"mx-auto w-full mt-15  md:mx-auto md:w-1/2"}),ee=e("form",{class:"mt-8 space-y-6 flex flex-col justify-center",method:"POST"}),Gt=ee.cloneNode(!0),te=e("div",{class:""}),Dn=e("input",{class:"bg-logoBg relative block w-full appearance-none border border-auctionBlue px-3 py-2 focus:outline-auctionBrown",type:"email",placeholder:"email",name:"email",pattern:"^[\\w\\-.]+@(stud.)?noroff.no$",title:"use a @stud.noroff.no mail-adress",required:"required"}),$t=te.cloneNode(!0);te.append(Dn);const Fn=e("input",{class:"bg-logoBg relative block w-full appearance-none border border-auctionBlue px-3 py-2 focus:outline-auctionBrown",title:"uppercase, lowercase and (_) allowed",placeholder:"name",type:"text",name:"name",pattern:"[\\w]+$"}),On=te.cloneNode(!0);$t.append(Fn);const Ee=e("div",{class:""}),Pn=e("input",{class:"bg-logoBg relative block w-full appearance-none border border-auctionBlue px-3 py-2 focus:outline-auctionBrown",type:"password",placeholder:"password",name:"password",minlength:"8",required:"required"});Ee.append(Pn);const Rn=Ee.cloneNode(!0),ke=e("button",{type:"submit",class:"bg-auctionBlue text-almostWhite p-1  rounded-sm  mx-auto"});ke.innerHTML="Login";const jt=ke.cloneNode(!0);jt.innerHTML="Register";const ne=e("div",{class:"bg-auctionBlue rounded text-center hidden",id:"login-success-alert"}),Wt=ne.cloneNode(!0);Wt.innerHTML="Account successfully created";ne.innerHTML="Login successful";const z=e("div",{class:"bg-auctionRed rounded text-center hidden",id:"login-warning-alert"});ee.append(te,Ee,ke,ne,z);const Ct=e("div",{class:"flex flex-col items-center justify-between mt-3"}),Nt=e("span",{class:"text-auctionGrey mx-auto"});Nt.innerHTML="OR";const Un=e("div",{class:"text-md mt-5 mx-auto"}),Ae=e("a",{class:"text-almostWhite bg-auctionGrey opacity-50 p-1 ml-1 rounded-sm hover:text-indigo-500",href:"./register"});Ae.innerHTML="Create an accocunt";Un.append(Ae);Ct.append(Nt,Ae);It.append(ee,Ct);const Dt=e("div",{class:"mx-auto w-full mt-15  md:mx-auto md:w-1/2"}),Jn=z.cloneNode(!0);Gt.append($t,On,Rn,jt,Wt,Jn);Dt.append(Gt);const _n=()=>{_.insertAdjacentElement("beforeend",It)},{login:Yn}=S,{registerLogin:Oe}=w,Vn=()=>{ee.addEventListener("submit",t=>{t.preventDefault();const o=new FormData(t.currentTarget),s=Object.fromEntries(o.entries()),{email:n}=s;Oe.body=JSON.stringify(s),g(Yn,Oe).then(i=>{if(i.email===n){const{name:r,email:a,credits:l,avatar:c,accessToken:u}=i;console.log(i),ne.classList.remove("hidden"),f("auctionToken",u),f("name",r),f("credits",l),f("email",a),f("avatar",c),setTimeout(()=>{f("authed","true"),f("page","index"),window.location.reload()},2e3)}else i.statusCode===401&&(z.classList.remove("hidden"),z.textContent=i.errors[0].message)})})},{entry:Pe}=w,{listings:zn}=S,Kn=t=>{const o=new FormData(t.currentTarget),s=Object.fromEntries(o.entries()),{date:n,tags:i,title:r,description:a}=s,c=new Date(n).toJSON();let u=[],d=i.split(",");document.querySelectorAll("[name='media'").forEach(B=>{B.value.length>0&&u.push(B.value)}),Pe.body=JSON.stringify({title:r,description:a,tags:d,media:u,endsAt:c}),g(zn,Pe).then(B=>{console.log(B)})},m=e("form",{class:" hidden mt-8 bg-logoBg p-3 relative flex flex-col justify-center mx-auto md:w-2/3 w-full",id:"newItem",method:"post",required:"required"}),Ft=e("small",{class:"text-almostWhite mx-auto mt-2"});Ft.innerHTML="Title";const Qn=e("input",{class:"bg-almostWhite mt-2 rounded p-1 text-black py-1",type:"text",name:"title",id:"titleInput",placeholder:"Title",required:"required"}),Ot=e("small",{class:"text-almostWhite mx-auto mt-2"});Ot.innerHTML="tags";const Xn=e("input",{class:"bg-almostWhite mt-2 rounded p-1 text-black py-1",type:"text",name:"tags",id:"tagsInput",placeholder:"tags"}),Pt=e("small",{class:"text-almostWhite mx-auto mt-2"});Pt.innerHTML="Description";const Zn=e("input",{class:"bg-almostWhite mt-2 rounded p-1 text-black py-1",type:"text",name:"description",id:"descriptionInput",placeholder:"description"}),Rt=e("small",{class:"text-almostWhite mx-auto mt-2"});Rt.innerHTML="Image URL's";const es=e("input",{class:"bg-almostWhite mt-2 rounded p-1 text-black py-1",type:"url",name:"media",id:"mediaInput",placeholder:"media URL"}),be=e("input",{class:"hidden bg-almostWhite mt-2 rounded p-1 text-black py-1",type:"url",name:"media",id:"mediaInput1",placeholder:"media URL",disabled:"disabled"}),fe=e("input",{class:"hidden bg-almostWhite mt-2 rounded p-1 text-black py-1",type:"url",name:"media",id:"mediaInput2",placeholder:"media URL",disabled:"disabled"}),he=e("input",{class:"hidden bg-almostWhite mt-2 rounded p-1 text-black py-1",type:"url",name:"media",id:"mediaInput3",placeholder:"media URL",disabled:"disabled"}),ts=e("input",{class:"bg-almostWhite mt-2 rounded p-1 text-black py-1",type:"datetime-local",name:"date",id:"dateInput",placeholder:"ends at",required:"required"}),ns=e("input",{class:"mt-2 rounded-none py-3 bg-auctionBlue",type:"submit",placeholder:"submit"}),qe=e("button",{class:"text-sm p-0 m-0 border rounded-none mx-auto px-1 mt-1",type:"button"});qe.innerHTML="Add photos &#8595";qe.addEventListener("click",t=>{be.classList.remove("hidden"),fe.classList.remove("hidden"),he.classList.remove("hidden"),be.removeAttribute("disabled"),fe.removeAttribute("disabled"),he.removeAttribute("disabled"),t.currentTarget.classList.add("hidden")});m.append(Ft);m.append(Qn);m.append(Ot);m.append(Xn);m.append(Pt);m.append(Zn);m.append(Rt);m.append(es);m.append(be);m.append(fe);m.append(he);m.append(qe);m.append(ts);m.append(ns);const{deleteOpt:ss}=w,{listings:os}=S,is=t=>{t.addEventListener("click",()=>{fetch(Ye+os+"/"+t.id,ss),setTimeout(()=>{f("updatedProfile","true"),window.location.reload()},500)})},{update:Re}=w,{listings:rs}=S,as=(t,o)=>{const s=new FormData(t.currentTarget),n=Object.fromEntries(s.entries()),{tags:i,title:r,description:a}=n;let l=[],c=i.split(",");t.currentTarget.querySelectorAll("[name='media'").forEach(d=>{d.value.length>0&&l.push(d.value)}),Re.body=JSON.stringify({title:r,description:a,tags:c,media:l}),g(rs+"/"+o,Re).then(d=>{console.log(d)})},{listings:cs}=S,{getWithJwt:ls}=w,ds=t=>{t.addEventListener("click",o=>{o.stopImmediatePropagation();const s=e("i",{class:"fa-solid fa-xmark fa-xl text-almostWhite absolute p-4 aspect-square right-0 top-0 h-7 hover:bg-auctionGreen"});p.append(s),p.classList.remove("hidden"),E.classList.add("modal"),E.classList.remove("hidden");const n=p.dateInput;n.remove();const i=p.querySelector("button");i.remove();const r=p.tags,a=Array.from(p.media);p.querySelectorAll(".hidden").forEach(c=>{c.classList.remove("hidden")}),g(cs+"/"+o.currentTarget.id,ls).then(c=>{p.title.value=c.title,p.description.value=c.description,c.media.forEach((d,L)=>{a[L].value=d}),r.value=c.tags.join(", ")}),s.addEventListener("click",()=>{s.remove(),p.append(n),p.append(i),p.classList.add("hidden"),E.classList.remove("modal"),E.classList.add("hidden")}),p.addEventListener("submit",c=>{c.preventDefault(),as(c,t.id),setTimeout(()=>{f("updatedProfile","true"),window.location.reload()},1e3)})})},{editAvatar:us}=S,{update:Ue}=w,ms=t=>{t.addEventListener("click",o=>{o.stopImmediatePropagation(),M.classList.remove("hidden"),M.classList.add("modal");const s=e("i",{class:"fa-solid fa-xmark fa-xl text-almostWhite absolute p-4 aspect-square right-5 top-5 h-7 hover:bg-auctionGreen"});M.append(G,s);const n=G.media,i=G.avatar;s.addEventListener("click",()=>{M.classList.add("hidden"),M.classList.remove("modal")}),n.addEventListener("input",qt(r=>{i.src=r.target.value},1e3)),G.addEventListener("submit",r=>{r.preventDefault(),Ue.body=JSON.stringify({avatar:n.value}),g(us,Ue).then(a=>{console.log(a),_e("avatar"),f("avatar",a.avatar),setTimeout(()=>{f("updatedProfile","true"),window.location.reload()},1e3)})})})},Ut=e("div",{class:"w-full  lg:w-2/4 sm:w-3/4 self-center flex flex-wrap"}),Jt=e("img",{class:"w-1/3 sm:w-1/2 apect-square mx-auto border rounded-lg max-w-lg"}),_t=e("div",{class:"w-2/3 sm:w-1/2 text-auctionGrey sm:grid sm:grid-rows-4 p-2"}),Yt=e("h2",{class:" text-auctionGrey text-xl "}),Ie=e("button",{class:"border bg-auctionGrey text-almostWhite h-8 m-0 text-sm w-1/2 self-end"});Ie.innerHTML="Edit avatar";ms(Ie);const Vt=e("p",{class:" text-auctionGrey"}),zt=e("p",{class:" text-auctionGrey"});_t.append(Yt,Vt,zt,Ie);const Kt=e("div",{class:"w-full   my-5"}),Ge=e("button",{class:" px-3 py-2 bg-auctionGreen rounded mx-auto border-none w-full"});Kt.append(Ge,m);Ge.innerHTML="Add listing";Ut.append(Jt,_t,Kt);const Qt=e("div",{class:"py-20"}),Xt=e("h2",{class:"text-lg text-auctionGrey "});Xt.innerHTML="Your listings";const Zt=e("div",{class:"w-full flex justify-start"}),K=e("button",{class:"rounded-xl bg-auctionBlue  mx-1 md:w-40 py-1 w-1/4"});K.innerHTML="Acitve";const Q=e("button",{class:"rounded-xl bg-logoBg mx-1 py-1 md:w-40 w-1/4  "});Q.innerHTML="All";Zt.append(K,Q);Qt.append(Xt,Zt);const re=(t,o,s,n,i)=>{const r=e("div",{class:"w-full grid grid-rows-4 sm:grid-rows-1 sm:grid-cols-4 relative sm:h-40 border rounded border-auctionBrown border-1 my-2"}),a=e("img",{class:"h-20 w-20 aspect-square object-cover m-auto"});a.src=t;const l=e("div",{class:"flex flex-col justify-around"}),c=e("p",{class:"text-auctionGrey m-auto"});c.innerHTML=o;const u=e("p",{class:"text-auctionGrey m-auto"});u.innerHTML=s,l.append(c,u);const d=e("div",{class:"flex flex-col justify-around p-3"}),L=e("button",{class:"bg-auctionBlue text-auctionGrey w-1/2 mx-auto my-1",id:i});ds(L),L.innerHTML="Update";const B=e("button",{class:"bg-auctionRed text-auctionGrey w-1/2 mx-auto my-1",id:i});B.innerHTML="Delete",is(B),d.append(L,B);const $e=e("div",{class:"flex p-3"}),se=e("a",{class:"text-auctionGrey m-auto bg-veryLightGrey h-1/2 w-full border rounded-lg items-center flex place-content-center"});return se.href=n,se.innerHTML="Visit",$e.append(se),r.append(a,l,d,$e),r},en=t=>h(t)<0?"<span class='bg-red-300 bg-opacity-30 p-2 text-auctionGrey'>FINISED</span>":"<span class='bg-auctionGreen bg-opacity-30 p-2 text-auctionGrey'>ACTIVE</span>",ps=t=>!(h(t)<0),G=e("form",{id:"avatarForm",class:"w-2/3 h-2/3 rounded-sm bg-logoBg flex flex-col align-items-center relative"}),gs=e("input",{class:" bg-almostWhite my-2 rounded p-1 text-black ",type:"url",name:"media",id:"avatarInput",placeholder:"avatar URL"}),tn=e("button",{type:"submit",class:"bg-auctionBlue rounded-none w-40 mx-auto my-5"});tn.innerHTML="Update";const nn=e("img",{class:"w-1/2 rounded-lg m-2",name:"avatar"});nn.src=y("avatar");G.append(nn,gs,tn);const Je=(t,o,s,n)=>{t.remove(),t.innerHTML="",o.append(t),s.forEach(i=>{t.insertAdjacentElement("beforeend",n(i.media[0],i.title,en(i.endsAt),`../item?id=${i.id}`,i.id))})},{account:bs}=S,{getWithJwt:fs}=w,R=e("div",{class:""}),E=e("div",{class:"w-full aspect-square hidden"}),p=m.cloneNode(!0),M=e("div",{class:"w-full aspect-square hidden"}),hs=async()=>{document.body.append(E,M),H.classList.add("min-h-screen"),document.title="Profile | AuctionHouse",b.innerHTML="Your details",p.id="updateForm",E.append(p),H.append(Ut,Qt,R);const t=[],o=[];await g(bs,fs).then(s=>{console.log(s),Jt.src=s.avatar,Yt.innerHTML=s.name,Vt.innerHTML=s.email,zt.innerHTML="Your wallet "+s.credits+"$",s.listings.forEach(n=>{R.insertAdjacentElement("beforeend",re(n.media[0],n.title,en(n.endsAt),`item?id=${n.id}`,n.id)),ps(n.endsAt)&&t.push(n),o.push(n)})}),K.append("("+t.length+")"),Q.append("("+o.length+")"),K.addEventListener("click",()=>{Je(R,H,t,re)}),Q.addEventListener("click",()=>{Je(R,H,o,re)}),Ge.addEventListener("click",s=>{m.classList.toggle("hidden")}),m.addEventListener("submit",s=>{s.preventDefault(),Kn(s),setTimeout(()=>{f("updatedProfile","true"),document.location.reload()},500)})},xs=()=>{F.innerHTML="",Qe.innerHTML="",hs()},vs=()=>{y("authed")==="false"||y("authed")===null?I.addEventListener("click",()=>{D(I,je,"afterbegin","newButton",()=>{v(_),b.innerHTML="Login"}),v(_),b.innerHTML="LOGIN",_n(),Vn()}):I.addEventListener("click",()=>{D(I,je,"beforeend","profileButton",()=>{Z.classList.remove("bg-auctionBlue"),X.classList.remove("bg-auctionBlue"),v(H)},"Profile"),v(H),xs()})},Ls=()=>{ve.insertAdjacentElement("beforeend",Dt)},ys=()=>{Y.addEventListener("click",()=>{D(Y,un,"beforeend","newButton",()=>{v(ve),b.innerHTML="Create Account"},"Create Account"),F.classList.add("hidden","sm:hidden","md:hidden","lg:hidden"),b.innerHTML="Create Account",Ls()})},ws=()=>{mn.addEventListener("click",()=>{dn.classList.toggle("hidden")}),oe.addEventListener("click",()=>{We.classList.remove("hidden"),ie.classList.remove("hidden"),oe.classList.add("hidden")}),ie.addEventListener("click",()=>{ie.classList.add("hidden"),We.classList.add("hidden"),oe.classList.remove("hidden"),v(F)})},Ts=()=>{Nn(),ws(),vs(),ys()};V()&&et();Ts();Cn();Sn();
